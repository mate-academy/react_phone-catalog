"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_copilot-chat_components_ChatInput_tsx-ui_packages_copilot-chat_components_LegalDi-36d9b7"],{69425:(e,t,n)=>{n.d(t,{g:()=>a});var r=n(96540);function a(e){let[t,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=e.current,r=t?.lastElementChild;if(!r)return;let a=new IntersectionObserver(([e])=>n(e?.isIntersecting??!0),{root:t,threshold:1});return a.observe(r),()=>a.disconnect()}),t}},41980:(e,t,n)=>{n.d(t,{U:()=>c});var r=n(62562),a=n(10833),i=n(96540),s=n(18312),o=n(65615),l=n(7426);function c(e,t,n,c,u,m){let{topRepositoriesCache:p}=(0,o.Pk)(),h=(0,l.b)(),[f,g]=(0,i.useState)([]),[x,y]=(0,i.useState)(!p),v=(0,i.useRef)(void 0),w=(0,s.useRelayEnvironment)(),b=(0,s.useFragment)(a.Sy,t??null);if(b&&!p&&!e){let{topRepositories:e}=b,t=d((e.edges||[]).flatMap(e=>e?.node?[(0,s.readInlineData)(a.R6,e.node)]:[])),{ownerLogin:r,name:i}=u??{};u&&!t.find(e=>`${e.ownerLogin}/${e.name}`==`${r}/${i}`)&&t.splice(0,0,{databaseId:u.id,isInOrganization:"Organization"===u.ownerType,name:u.name,nwo:`${u.ownerLogin}/${u.name}`,ownerLogin:u.ownerLogin,ownerAvatarUrl:`/${u.ownerLogin}.png?s=40`}),setTimeout(()=>h.setTopRepositoryTopics(t),10),y(!1),n(void 0)}let j=(0,i.useCallback)(async()=>{try{let e=await (0,s.fetchQuery)(w,a.m,{topRepositoriesFirst:m}).toPromise();n(e?.viewer)}catch{}finally{y(!1)}},[w,n,m]);return((0,i.useEffect)(()=>{c&&j()},[j,c]),(0,i.useEffect)(()=>{let t=async e=>{y(!0);let t=((await new Promise((t,n)=>{(0,s.fetchQuery)(w,a.XD,{searchQuery:(0,r.J)(e)}).subscribe({start:e=>{v.current?.unsubscribe(),v.current=e},next:e=>{t(e)},error:e=>{n(e)}})})).search.nodes||[]).flatMap(e=>e?[(0,s.readInlineData)(a.R6,e)]:[]);g(t.length?d(t):[]),y(!1)};e?t(e):p&&g(p)},[e,w,p]),p&&!e)?{repositories:p,loading:!1}:{repositories:f,loading:x}}function d(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},21057:(e,t,n)=>{n.d(t,{JE:()=>m,Z3:()=>u,bn:()=>d,kw:()=>p});var r=n(97286),a=n(80758),i=n(96540),s=n(82610),o=n(65615),l=n(7426),c=n(68956);let d="https://github.com/marketplace?type=apps&copilot_app=true",u="@";function m(e=!0){let t=(0,o.Pk)(),n=(0,l.b)(),a=(0,c.iI)(),d=n.getSelectedThread(t)?.customCopilotID,u=!!(a||d),{model:p,messages:h,agentsPath:f}=t,g=p?.hasLimitedCapabilities,x=(0,i.useCallback)(e=>{if(g||u)return{agents:[],showLimit:!1};let t=(0,s.Q7)(h)[0];return t?{agents:e.filter(e=>e.slug===t.name),showLimit:!0}:{agents:e,showLimit:!1}},[u,h,g]),{isLoading:y,data:v,refetch:w,isStale:b,isFetched:j}=(0,r.I)({queryKey:["copilot-chat","agents",f],queryFn:()=>f?n.fetchAgents(f):[],select:x,enabled:e&&!g&&!u}),I=async()=>!j||b?(await w()).data:v;return{loading:y,disabled:g,availableAgents:v?.agents,showLimit:v?.showLimit??!1,imperativelyFetch:I}}function p({inputOnChange:e,inputRef:t}){let n=(0,a.H)({inputRef:t,fallbackEventHandler:e});return(0,i.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let r=`${u}${e}`;n(r,[0,0],r.length)},[n,t])}},1750:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},10967:(e,t,n)=>{n.d(t,{Ld:()=>h,M8:()=>g,Tz:()=>v,U2:()=>f,W5:()=>d,cx:()=>p,r_:()=>y,vn:()=>x,xG:()=>u});var r=n(97665),a=n(40458),i=n(94747),s=n(97286),o=n(57572),l=n(96540),c=n(37937);n(65615),n(7426);let d={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},u={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},m=[u.NotFound,u.Unauthorized,u.ServiceUnavailable,u.QuotaExhausted,u.Forbidden,u.RequestFailed],p=256,h=400;function f(e,t,n){let r=(0,l.useRef)(void 0),a=(0,l.useRef)(void 0),i=(0,l.useRef)([]),s=(0,l.useRef)(!1),[o,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(!0),m=(0,l.useCallback)(()=>{c([]),u(!1)},[]),p=(0,l.useCallback)(()=>{if(n&&e)try{let e=new Worker(n);e.onmessage=({data:e})=>{s.current=!1,c(e.list),u(!1),a.current=e.query,i.current=e.list},r.current=e}catch(e){console.warn("Web workers are not available: ",e)}},[n,e]),h=(0,l.useCallback)(t=>{s.current&&(r.current?.terminate(),p());let n=a.current&&t.startsWith(a.current)&&i.current.length;u(!0),s.current=!0,r.current?.postMessage({baseList:n?i.current:e,query:t})},[e,p]);return((0,l.useEffect)(()=>(p(),()=>r.current?.terminate()),[p]),(0,l.useEffect)(()=>{h(t)},[t,h]),n)?[o,d,m]:[[],!1,()=>{}]}function g(e){var t,n;let s=(0,r.jE)(),o=(0,l.useCallback)(()=>Promise.all(e.map(e=>s.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),[s,e]),c=(0,a.E)({queries:e.map(e=>({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:u.Unknown,code:d.Unknown,docs:d.Unknown},staleTime:1/0}))}),{mutate:p}=(0,i.n)({mutationKey:["repos-indexing-state"],mutationFn:()=>b(e),onSuccess:o}),h={requestStatus:0===(n=(t=c.map(e=>e.data)).map(e=>e.requestStatus)).length?u.Unknown:n.some(e=>m.includes(e))?u.IndexingError:n.every(e=>e===u.CanIndex)?u.CanIndex:(n.every(e=>e===u.Unknown),u.Unknown),code:I(t.map(e=>e.code)),docs:I(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens};return R(()=>void o(),h.code===d.Indexing&&h.requestStatus!==u.IndexingError?1e4:0),[h,()=>p()]}function x(e){let t=(0,r.jE)(),n=(0,l.useCallback)(()=>Promise.resolve(t.invalidateQueries({queryKey:["repo-indexing-state",e]})),[t,e]),a=(0,s.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:u.Unknown,code:d.Unknown,docs:d.Unknown},staleTime:1/0}),{mutate:o}=(0,i.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>b([e]),onSuccess:n}),c=a.data;return R(()=>void n(),c.code===d.Indexing&&c.requestStatus!==u.IndexingError?1e4:0),[c,()=>o()]}function y(e){let t=(0,s.I)({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>j(e),staleTime:1/0});return!t.isError&&!!t.data?.canChat}function v(){let e=c.J.getPanelHeight(),t=c.J.getPanelWidth(),n=(0,l.useRef)(null),r=(0,l.useRef)(e),a=(0,l.useRef)(e),i=(0,l.useRef)(null),s=(0,l.useRef)(t),o=(0,l.useRef)(t),[d,u]=(0,l.useState)(e),[m,f]=(0,l.useState)(t),g=(0,l.useRef)(0);(0,l.useEffect)(()=>{g.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let x=e=>Math.min(Math.max(e,p),window.innerHeight-g.current),y=e=>Math.min(Math.max(e,h),window.innerWidth-2*g.current),v=(0,l.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=x(r.current+t);u(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=y(s.current+t);f(n),o.current=n}},[]),w=(0,l.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",w),null!==n.current&&(c.J.setPanelHeight(a.current),n.current=null),null!==i.current&&(c.J.setPanelWidth(o.current),i.current=null)},[v]),b=(0,l.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=d),t&&(i.current=e.clientX,s.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",w))},[d,m,v,w]),j=(0,l.useCallback)(e=>{if("ArrowUp"===e.key){let t=x(d+4);u(t),c.J.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=x(d-4);u(t),c.J.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=y(m-4);f(t),c.J.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=y(m+4);f(t),c.J.setPanelWidth(t),e.preventDefault()}},[d,m]);return{panelWidth:m,panelHeight:d,startResize:b,onResizerKeyDown:j}}async function w(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)return{requestStatus:u.RequestFailed,code:d.Unknown,docs:d.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function b(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,o.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function j(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});return t.ok?await t.json():{canChat:!1}}function I(e){return e.every(e=>e===d.Indexed)?d.Indexed:e.every(e=>e===d.Unindexed)?d.Unindexed:e.some(e=>e===d.Indexing)?d.Indexing:e.some(e=>e===d.Unindexed)?d.PartiallyIndexed:d.Unknown}function R(e,t){let n=(0,l.useRef)(void 0),r=(0,l.useRef)(e);return(0,l.useEffect)(()=>{r.current=e},[e]),(0,l.useEffect)(()=>{if(t>0)return n.current=window.setInterval(()=>r.current(),t),()=>window.clearInterval(n.current)},[t]),n}},39046:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(46988),a=n(2622),i=n(5271),s=n(31747);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAttachmentLimit(){return 1}static getAttachmentSizeLimit(){return a.W.dotcomChatFileUpload?384e4:512e3}static makeImageReference(e,t){let n;let r=crypto.randomUUID();return a.W.dotcomChatFileUpload&&(n=new s.N(r,e,t)),n||(n=new s.J(r,e)),{id:r,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>l.includes(e)):[]}async addImageAttachment(e,t="unknown"){let n=this.state.selectedThreadID;if(!n&&a.W.dotcomChatFileUpload)try{n=(await this.manager.createThread()).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}if(this.state.currentReferences.find(e=>"image"===e.type)){this.manager.addAmbientError("Only one image can be uploaded at a time"),(0,i.d)("file_limit_reached");return}if(("menu"===t||"unknown"===t)&&!CopilotImageAttacher.isTypeAllowed(e.type,this.state.model)){(0,i.d)("included_unsupported_file",{fileTypes:e.type,uploadType:t});return}let s=a.W.dotcomChatFileUpload,o=`Only images below ${s?"3.75MB":"500KB"} are supported${s?"":" during this preview period"}`;if(e.size>CopilotImageAttacher.getAttachmentSizeLimit()){this.manager.addAmbientError(o),(0,i.d)("size_limit_exceeded",{size:e.size});return}if(null==n)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let l=CopilotImageAttacher.makeImageReference(e,n);await this.autocomplete.addToReferences(l,this.state);try{await l.attachment.prefetch()}catch(e){if("string"==typeof e)this.manager.addAmbientError("An error occurred uploading the attachment"),(0,i.d)("ErrorString",{message:e});else if(e instanceof Error){if((0,i.d)(e.name,{message:e.message}),"FileSizeError"===e.name)this.manager.addAmbientError(o);else throw this.manager.addAmbientError("An unexpected error occurred while reading the file"),this.manager.removeReference(l),e}this.manager.removeReference(l);return}this.manager.setImageAttachmentUploaded(l.id,l.attachment),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t})}constructor(e,t,n){o(this,"state",void 0),o(this,"manager",void 0),o(this,"autocomplete",void 0),this.state=e,this.manager=t,this.autocomplete=n}}},68956:(e,t,n)=>{n.d(t,{Cb:()=>m,VR:()=>p,YO:()=>u,hH:()=>f,iI:()=>x,k1:()=>h,rj:()=>d});var r=n(97286),a=n(47584),i=n(96540),s=n(82610),o=n(2622),l=n(65615),c=n(7426);function d(e=!0){let{model:t,messages:n}=(0,l.Pk)(),a=(0,c.b)(),u=o.W.customCopilots,m=t?.hasLimitedCapabilities,p=(0,i.useCallback)(e=>{if(!u||m)return{copilots:[],showLimit:!1};let t=(0,s.Q7)(n)[0];return t?{copilots:e.filter(e=>e.slugWithOwner===t.name),showLimit:!0}:{copilots:e,showLimit:!1}},[u,n,m]),{isLoading:h,data:f,refetch:g,isStale:x,isFetched:y}=(0,r.I)({queryKey:["copilot-chat","custom-copilots"],queryFn:()=>a.fetchCustomCopilots(),select:p,enabled:e}),v=(0,i.useCallback)(async()=>!y||x?(await g()).data:f,[f,y,x,g]);return{loading:h,disabled:m,availableCopilots:f?.copilots,showLimit:f?.showLimit,imperativelyFetch:v}}function u(e){return!!o.W.customCopilots&&"slugWithOwner"in e}function m(e){return`${s.VR}/${e}`}function p(){let e=a.fV?.pathname;return e===s.VR||e===`${s.VR}/`}function h(){let e=RegExp(`^${s.VR}/[a-zA-Z0-9]+$`);return!!a.fV?.pathname?.match(e)}function f(){return p()||h()}let g=/\/copilot\/spaces\/([^/]+)/;function x(){let e=a.fV.pathname;return(0,i.useMemo)(()=>{let t=e.match(g);if(!t)return null;let[,n]=t;return parseInt(n??"",10)??null},[e])}},62562:(e,t,n)=>{n.d(t,{J:()=>r});function r(e){let t=e.indexOf("/");if(-1===t||0===t)return`${e} in:name archived:false`;let n=e.slice(0,t),r=e.slice(t+1);return 0===r.length?`org:${n} in:name archived:false`:`org:${n} ${r} in:name archived:false`}},41720:(e,t,n)=>{n.d(t,{X:()=>a});var r=n(94232);function a(e){let t=e.join(","),[n]=(0,r.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},33513:(e,t,n)=>{let r;n.d(t,{V:()=>e1});var a,i=n(74848),s=n(46988),o=n(40458),l=n(53949),c=n(11499),d=n(57572),u=n(38621),m=n(34164),p=n(96540),h=n(96558),f=n(82610),g=n(2622),x=n(39046),y=n(5271);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let w="application/x.clipboard",b=/^text\/([^/\s]+)$/i,j=new Set([w,"application/json","application/xml","application/javascript",""]),I=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static isAttachable(e){return(b.test(e.type)||j.has(e.type))&&e.size<=CopilotTextAttacher.getAttachmentSizeLimit()}static getAttachmentSizeLimit(){return 512e3}makePlaceholderReference(e){return{type:"loading",title:e.name,id:crypto.randomUUID(),isClientOnly:!0}}async makeReference(e){let t=await e.text(),n=e.name||await this.generateFileName(t,e.type),r=n.split(".").pop();return(0,s.BI)("copilot.attach_pasted_file",{extension:r,characters:t.length}),{type:"thread-scoped-file",name:n,text:t,language:""}}async addAttachment(e){if(!CopilotTextAttacher.isAttachable(e))return;let t=this.makePlaceholderReference(e);this.manager.addReference(t,"text-attacher");let n=await this.makeReference(e);this.manager.replaceReference(t,n)}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Determine a suitable name for this file. Respond with only the file name, and try to limit the name to 20 characters or less.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),a=r.ok?I.exec(r.payload)?.[1]:null;return a?(0,s.BI)("copilot.generate_pasted_file_name.success"):(0,s.BI)("copilot.generate_pasted_file_name.failure"),a??this.defaultFileName(t)}defaultFileName(e){return e===w?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){v(this,"manager",void 0),v(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};var R=n(33492),C=n(65615),S=n(7426),N=n(41720),A=n(38568),_=n(47767),k=n(37937);let E=({manager:e})=>[{label:"Delete conversation",command:"delete",icon:u.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=e.getSelectedThread(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:u.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=e.getSelectedThread(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:u.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}],T=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=E({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let a=r[0],i=e.substring(a.command.length).trim();return await a.action(i,t),!0};var L=n(68956);function M(e){return(0,L.YO)(e)?e.slugWithOwner:e.slug}var D=n(89323),P=n(8338),O=n(21057),F=n(62456);function B({onSelectPanel:e,onSelectAgent:t}){let{availableAgents:n,showLimit:r,disabled:a,loading:o}=(0,O.JE)(),l=n&&n.length>0;return o?(0,i.jsxs)(P.l.Item,{disabled:!0,children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.MentionIcon,{})}),"Extension"]}):a?(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),e("agents-not-supported")},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.MentionIcon,{})}),"Extension\u2026"]}):l?(0,i.jsxs)(D.W,{children:[(0,i.jsx)(D.W.Anchor,{children:(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.MentionIcon,{})}),"Extension"]})}),(0,i.jsx)(D.W.Overlay,{width:"small",children:(0,i.jsxs)(P.l,{children:[n.map(e=>(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),t(e)},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(F.r,{src:e.avatarUrl})}),e.name,(0,i.jsxs)(P.l.Description,{variant:"inline",truncate:!0,children:[O.Z3,e.slug]}),r&&(0,i.jsx)(P.l.Description,{variant:"block",children:"You're limited to one agent per thread."})]},e.slug)),(0,i.jsx)(P.l.Divider,{}),(0,i.jsxs)(P.l.LinkItem,{href:O.bn,onClick:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.TelescopeIcon,{})}),"Marketplace",(0,i.jsx)(P.l.TrailingVisual,{children:(0,i.jsx)(u.LinkExternalIcon,{})})]})]})})]}):(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),e("no-agents-available")},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.MentionIcon,{})}),"Extension\u2026"]})}try{B.displayName||(B.displayName="AgentMenu")}catch{}var $=n(75177),U=n(55847),W=n(34614),q=n(74144),z=n(27297);function H({onClose:e}){let t=g.W.customCopilots;return(0,i.jsx)(q.l,{width:"large",title:t?"Copilots and extensions":"Extensions",position:{narrow:"fullscreen",regular:"center"},onClose:e,renderBody:()=>(0,i.jsx)($.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",px:4,py:8,flex:1,height:"100%"},children:(0,i.jsxs)($.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,i.jsx)(u.TelescopeIcon,{size:24}),(0,i.jsx)($.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:"Chat with your favorite tools and services"}),(0,i.jsx)($.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,i.jsx)(U.Q,{as:"a",href:O.bn,children:"Browse marketplace"}),(0,i.jsx)($.A,{sx:{mt:2},children:(0,i.jsx)(W.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})})}function V({onClose:e}){let t=(0,S.b)(),n=g.W.customCopilots;return(0,i.jsx)(q.l,{width:"large",title:n?"Copilots and Extensions":"Extensions",position:{narrow:"fullscreen",regular:"center"},onClose:e,renderBody:()=>(0,i.jsx)($.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",px:4,py:10,height:"100%",alignItems:"center",justifyContent:"center"},children:(0,i.jsxs)($.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,i.jsx)($.A,{sx:{display:"flex",color:"attention.fg"},children:(0,i.jsx)(u.AlertIcon,{size:24})}),(0,i.jsxs)($.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:[n?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,i.jsxs)($.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:["Switch back to the ",z.UB.displayName," model or start a new conversation"]}),(0,i.jsx)(U.Q,{onClick:()=>{t.selectThread(null),t.selectModel(z.UB)},children:"New conversation"})]})})})}try{H.displayName||(H.displayName="NoAgentsAvailableDialog")}catch{}try{V.displayName||(V.displayName="AgentsNotSupportedDialog")}catch{}var K=n(80688),G=n(87330),X=n(85349),J=n(84217),Z=n(52464),Q=n(30631),Y=n(30729),ee=n(61597),et=n(40961),en=n(10967);let er={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--NqDvF",ActionList_Description:"KnowledgeSelectPanel-module__ActionList_Description--CM7xN"},ea=(0,p.forwardRef)(function({open:e,setOpen:t,...n},r){return(0,i.jsx)(G.K,{ref:r,"aria-expanded":!!e||void 0,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:u.BookIcon,onClick:()=>t(!e),sx:{color:"fg.muted"},variant:"invisible",...n})});function ei({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,submitReturnFocusRef:a,cancelReturnFocusRef:s}){let o=(0,C.Pk)(),c=(0,S.b)(),d=(0,R.c)(),u=(0,K.A)("localStorage"),{knowledgeBases:m}=o,[h,x]=(0,p.useState)([]),[y,v]=(0,p.useState)(!0),[w,b]=(0,p.useState)(""),j=(0,p.useRef)(null),I=u.getItem("lastUsedKnowledgeBaseId")||"",N=u.getItem("lastUsedKnowledgeBaseOrg")||"";(0,p.useEffect)(()=>{n||b("")},[n]);let A=(0,p.useMemo)(()=>""===w?m:m.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),[w,m]),_=(0,p.useMemo)(()=>A.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[A]),[E,T]=(0,p.useState)(!1),L=y||"pending"===o.knowledgeBasesLoading.state,M=E||"error"===o.knowledgeBasesLoading.state;(0,p.useEffect)(()=>{let e=async()=>{v(!0),await c.fetchKnowledgeBases();let e=await c.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?x(e.payload||[]):T(!0),v(!1)};n&&e()},[n]);let D=(0,p.useCallback)(e=>{"DIALOG"===e.target.tagName&&r(!1)},[r]);(0,p.useEffect)(()=>(document.addEventListener("click",D),()=>{document.removeEventListener("click",D)}),[D]),(0,p.useEffect)(()=>{if(n&&j.current){let e=j.current.querySelector("input[type=text]");e?.focus()}},[n]);let{currentReferences:O}=o,F=eu(),B=e=>{c.dismissAttachKnowledgeBaseHerePopover(),c.clearCurrentReferences(["image","issue"]),c.clearCurrentTopic(),o.selectedThreadID&&k.J.setSelectedTopic(o.selectedThreadID,null);let t=(0,f.UU)(e);d.addToReferences(t,o),u.setItem("lastUsedKnowledgeBaseId",e.id),u.setItem("lastUsedKnowledgeBaseOrg",e.ownerLogin)},$=(e,t)=>e.id===I?-1:t.id===I?1:0,U=e=>{let t=o.currentReferences.find(t=>(0,f.P)(t)&&t.id===e.id);if(t){c.removeReference(t);return}c.addReference((0,f.UU)(e),"docsetMenu")};return o.model?.hasLimitedCapabilities?(0,i.jsx)(ep,{open:n,setOpen:r,...e}):L||0!==m.length?(0,i.jsx)("div",{ref:j,...(0,l.G)("knowledge-select-panel"),children:(0,i.jsxs)(ee.X,{description:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,et.flushSync)(()=>r(!1)),s.current?.focus()},onSubmit:()=>{(0,et.flushSync)(()=>r(!1)),a.current?.focus()},open:n,selectionVariant:g.W.topicsAsReferences?"multiple":"instant",title:g.W.topicsAsReferences?"Select knowledge bases":"Select a knowledge base",variant:"modal",width:"large",maxHeight:"xlarge",children:[(0,i.jsx)(ee.X.Header,{children:(0,i.jsx)(ee.X.SearchInput,{onChange:e=>{b(e.currentTarget.value)},placeholder:"Search knowledge bases","aria-label":"Search knowledge bases"})}),(0,i.jsx)(P.l,{sx:{minHeight:340},children:L?(0,i.jsx)(ee.X.Loading,{children:"Fetching knowledge bases\u2026"}):M?(0,i.jsx)(ee.X.Message,{variant:"error",children:"Failed to load knowledge bases"}):0===_.length?(0,i.jsx)(ee.X.Message,{variant:"empty",title:"No knowledge bases found",children:"Try a different search term"}):[..._].sort((e,t)=>e.org===N?-1:t.org===N?1:0).map(e=>(0,i.jsxs)(P.l.Group,{children:[(0,i.jsx)(P.l.GroupHeading,{children:e.org}),[...e.docsets].sort($).map(e=>(0,i.jsx)(ec,{docset:e,selected:O.some(t=>(0,f.P)(t)&&t.id===e.id),onSelect:()=>g.W.topicsAsReferences?U(e):B(e)},e.id))]},e.org))}),F&&(0,i.jsx)(ee.X.Footer,{children:(0,i.jsx)(ed,{message:F})})]})}):(0,i.jsx)(es,{administratedCopilotEnterpriseOrganizations:h,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:o.mode,...t})}function es({administratedCopilotEnterpriseOrganizations:e,anchorRef:t,open:n,setOpen:r}){let a=eu(),s=t?{anchorRef:t,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,i.jsx)(ea,{open:n,setOpen:r,...e})},o=e?.length===0;return(0,i.jsx)(X.T,{open:n,onOpen:()=>r(!0),onClose:()=>r(!1),overlayProps:{anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},...s,children:(0,i.jsxs)($.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:{display:"flex",flexDirection:"column",...o?{height:"100%"}:{}},...(0,l.G)("empty-knowledge-base-picker"),children:[(0,i.jsx)($.A,{sx:{borderBottom:"1px solid",borderColor:"border.muted"},children:(0,i.jsxs)($.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:2,px:3},children:[(0,i.jsx)(J.A,{id:"knowledge-base-dialog-title",as:"h4",sx:{fontSize:1},children:"Attach a knowledge base"}),(0,i.jsx)(G.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:u.XIcon,variant:"invisible",onClick:()=>r(!1)})]})}),(0,i.jsxs)($.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,pt:3,...o?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{}},children:[(0,i.jsx)(Y.A,{icon:u.BookIcon,size:"medium",sx:{color:"fg.muted"}}),(0,i.jsxs)($.A,{sx:{gap:2,display:"flex",alignItems:"center",flexDirection:"column",...o?{maxHeight:"100%"}:{}},children:[(0,i.jsx)(Z.A,{sx:{fontSize:1,fontWeight:600},children:"You don't have any knowledge bases"}),(0,i.jsxs)($.A,{sx:{color:"fg.muted",textAlign:"center",fontSize:0,px:3},children:[(0,i.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),o&&(0,i.jsx)(Z.A,{as:"p",sx:{mt:3,mb:4},...(0,l.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."})]}),e.length>0&&(0,i.jsx)(eo,{administratedCopilotEnterpriseOrganizations:e})]})]}),a&&(0,i.jsx)($.A,{sx:{borderTop:"1px solid",borderColor:"border.muted",px:2,py:3},children:(0,i.jsx)(ed,{message:a})})]})})}function eo({administratedCopilotEnterpriseOrganizations:e}){return 1===e.length?(0,i.jsx)(U.Q,{as:"a",href:em(e[0]),sx:{mb:4},...(0,l.G)("create-knowledge-base-button"),children:"Create a knowledge base"}):(0,i.jsxs)($.A,{sx:{width:"100%",textAlign:"left",borderTop:"1px solid",borderColor:"border.muted",pt:3},...(0,l.G)("create-knowledge-base-dropdown"),children:[(0,i.jsx)(J.A,{as:"h3",sx:{fontSize:0,color:"fg.muted",pl:3},children:"Create a knowledge base for an organization"}),(0,i.jsx)(P.l,{sx:{maxHeight:"160px",overflow:"scroll"},children:e.map(e=>(0,i.jsx)(el,{org:e},e.id))})]})}function el({org:e}){return(0,i.jsx)(P.l.Item,{children:(0,i.jsxs)(W.A,{sx:{flex:1,color:"fg.default"},href:em(e),children:[(0,i.jsx)(F.r,{square:!0,src:e.avatarUrl,alt:e.login,sx:{mr:2},"aria-hidden":"true"}),(0,i.jsx)(Q.A,{inline:!0,title:e.login,sx:{minWidth:"80%"},children:e.login})]})})}function ec({docset:e,selected:t,onSelect:n}){let r=e.sourceRepos?.map(e=>e.id)||[],a=(0,en.r_)(r);return(0,i.jsxs)(P.l.Item,{onSelect:()=>n(),selected:t,disabled:!a,children:[e.name,(0,i.jsx)(P.l.Description,{variant:"block",className:er.ActionList_Description,children:e.description})]},e.id)}function ed({message:e}){return e?(0,i.jsx)($.A,{"data-testid":"knowledge-select-panel-sso",sx:{color:"fg.muted",fontSize:0,ml:2},children:e}):null}function eu(){let e=(0,C.Pk)(),t=e.ssoOrganizations.map(e=>e.login);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;{let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function em(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function ep({anchorRef:e,open:t,setOpen:n}){let r=e?{anchorRef:e,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,i.jsx)(ea,{open:t,setOpen:n,...e})};return(0,i.jsx)(X.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),...r,children:(0,i.jsxs)("div",{className:(0,m.$)("m-3 d-flex flex-column flex-items-center text-center",er.disabledForPreviewModelsPanel),children:[(0,i.jsx)(u.AlertIcon,{className:"fgColor-attention mb-3"}),(0,i.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,i.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]})})}try{ea.displayName||(ea.displayName="KBIconButton")}catch{}try{(a=KBIconButtonInner).displayName||(a.displayName="KBIconButtonInner")}catch{}try{ei.displayName||(ei.displayName="KnowledgeSelectPanel")}catch{}try{es.displayName||(es.displayName="EmptyKnowledgeBase")}catch{}try{eo.displayName||(eo.displayName="CreateKnowledgeBaseButton")}catch{}try{el.displayName||(el.displayName="CreateKnowledgeBaseActionRow")}catch{}try{ec.displayName||(ec.displayName="KnowledgeBaseSelectRow")}catch{}try{ed.displayName||(ed.displayName="SSOFooter")}catch{}try{ep.displayName||(ep.displayName="DisabledForPreviewModels")}catch{}var eh=n(89401),ef=n(70170),eg=n(97286),ex=n(1750);let ey={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--ZB4TR",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--WR2cM",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--D5U0G"};var ev=n(61818);let ew=e=>`Choose items from ${e} to chat about. Use fewer references for more accurate responses.`,eb="Search",ej=({open:e,onOpenChange:t,...n})=>{let{currentTopic:r}=(0,C.Pk)();return(0,f.Z6)(r)?(0,i.jsx)(eR,{...n,open:e,onOpenChange:t,sourceRepository:r}):(0,i.jsx)(eC,{open:e,setOpen:t})},eI=({open:e,onOpenChange:t,cancelReturnFocusRef:n,submitReturnFocusRef:r,...a})=>{let s=(0,S.b)(),[o,l]=(0,p.useState)();(0,p.useEffect)(()=>l(void 0),[e]);let c=new Set((0,C.pn)(e=>e.currentReferences).filter(e=>"repository"===e.type).map(e=>e.id)),[d,u]=(0,p.useState)(),m=(0,p.useRef)(!1),h=async e=>{u(void 0),m.current=!0;let t=await s.service.fetchRepo(e);t.ok?l(t.payload):u("Error: failed to load repository details. Please try again."),m.current=!1};return o?(0,i.jsx)(eR,{...a,open:e,onOpenChange:t,sourceRepository:o,cancelReturnFocusRef:n,submitReturnFocusRef:r}):(0,i.jsx)(ev.X1,{selectionVariant:"instant",open:e,onOpenChange:e=>{m.current||t(e)},selectedRepoIds:new Set,onSelectRepo:h,cancelReturnFocusRef:n,submitReturnFocusRef:r,description:"Choose a repository to browse for files and symbols.",featuredRepoIds:c,error:d})},eR=({renderAnchor:e,anchorRef:t,open:n,onOpenChange:r,submitReturnFocusRef:a,cancelReturnFocusRef:s,sourceRepository:o})=>{let{findFileWorkerPath:l}=(0,C.Pk)(),[c,d]=(0,p.useState)(""),u=(0,p.useRef)((0,ef.s)(d,250));(0,p.useEffect)(()=>{n||d("")},[n]);let{initialLoading:m,filterLoading:h,selected:g,unselected:x,toggleSelection:y}=function(e,t,n,r){let a=(0,C.Pk)(),i=(0,S.b)(),s=(0,R.c)(),o=function(e,t,n,r,a){let i=(0,R.c)(),s=new Map(a.filter(e=>"file"===e.type&&e.repoID===t?.id).map(e=>[e.path,e])),o=new Map(a.filter(e=>"folder"===e.type&&e.repoID===t?.id).map(e=>[e.path,e])),l=new Map(a.filter(e=>"symbol"===e.type&&"suggestionSymbol"===e.kind&&(e.suggestionDefinitions?.some(e=>e.repoID===t?.id)??!1)).map(e=>[e.name,e])),{isLoading:c,data:d}=(0,eg.I)({queryKey:["copilot-chat","files-autocomplete",t?.ownerLogin,t?.name,e],queryFn:async()=>t?(await i.fetchAutocompleteSuggestions(t,e),{filePaths:eA(Array.from(i.fileSuggestions.values()).map(e=>e.path),s.keys()),folderPaths:eA(Array.from(i.folderSuggestions.values()).map(e=>e.path),o.keys()),symbolNames:eA(Array.from(i.symbolSuggestions.values()).map(e=>e.name),l.keys())}):null,enabled:r}),[u,m]=(0,en.U2)(d?.filePaths??null,e,n),[p,h]=(0,en.U2)(d?.folderPaths??null,e,n),[f,g]=(0,en.U2)(d?.symbolNames??null,e,n),x=[...u.slice(0,7).map(e=>i.fileSuggestions.get(e)??s.get(e)).filter(e=>!!e).map(e=>e_(e)).filter(e=>!!e),...p.slice(0,7).map(e=>i.folderSuggestions.get(e)??o.get(e)).filter(e=>!!e).map(e=>e_(e)).filter(e=>!!e),...f.slice(0,7).map(e=>i.symbolSuggestions.get(e)??l.get(e)).filter(e=>!!e).map(e=>e_(e)).filter(e=>!!e)],y=c&&!e;return{items:x,filterLoading:!y&&(c||m||h||g),initialLoading:y}}(t,n,r,e,a.currentReferences),l=a.currentReferences.map(e=>(0,f.Vb)(e)).filter(e=>void 0!==e),{selected:c=[],unselected:d=[]}=(0,ex.O)(o.items,e=>l.includes(e.id)?"selected":"unselected"),u=(0,p.useCallback)(async e=>{let t=a.currentReferences.find(t=>e.id===(0,f.Vb)(t));t?i.removeReference(t):await ek(e,a,s)},[s,i,a]);return{...o,selected:c,unselected:d,toggleSelection:u}}(n,c,o,l),v=g.length+x.length,w=`${o.ownerLogin}/${o.name}`;return(0,i.jsxs)($.A,{sx:{flexGrow:"0 !important"},children:[e?.({}),(0,i.jsxs)(ee.X,{anchorRef:t,title:"Select files, folders, and symbols",description:ew(w),onCancel:()=>{(0,et.flushSync)(()=>r(!1)),a.current?.focus()},onSubmit:()=>{(0,et.flushSync)(()=>r(!1)),s.current?.focus()},open:n,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[(0,i.jsx)(ee.X.Header,{children:(0,i.jsx)(ee.X.SearchInput,{loading:h,onChange:e=>u.current(e.target.value),placeholder:eb,"aria-label":eb})}),(0,i.jsx)(P.l,{sx:{minHeight:340},children:m?(0,i.jsx)(ee.X.Loading,{children:"Fetching files, folders, and symbols\u2026"}):0!==v||h?(0,i.jsxs)(i.Fragment,{children:[g.map(e=>(0,i.jsx)(eN,{item:e,selected:!0,toggleSelection:y},e.id)),g.length>0&&x.length>0&&(0,i.jsx)(P.l.Divider,{}),x.map(e=>(0,i.jsx)(eN,{item:e,selected:!1,toggleSelection:y},e.id))]}):(0,i.jsx)(ee.X.Message,{variant:"empty",title:"No files or symbols found",children:"Try a different search term"})})]})]})};function eC({open:e,setOpen:t,renderAnchor:n}){return(0,i.jsx)(X.T,{open:e,onOpen:()=>t(!0),onClose:()=>t(!1),renderAnchor:e=>n?.(e)??(0,i.jsx)(i.Fragment,{}),children:(0,i.jsxs)("div",{className:ey.chooseRepoInstructionPanel,children:[(0,i.jsx)(u.PaperclipIcon,{}),(0,i.jsx)("h3",{className:ey.chooseRepoTitle,children:"Attach a repository first"}),(0,i.jsx)("p",{className:ey.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]})})}let eS=e=>`reference-list-item-${e.id}`;function eN({toggleSelection:e,selected:t,item:n}){return(0,i.jsxs)(P.l.Item,{onSelect:()=>{e(n),setTimeout(()=>{document.getElementById(eS(n))?.focus()})},selected:t,"aria-checked":t,id:eS(n),sx:{mx:2,'&[data-is-active-descendant="activated-directly"]':{backgroundColor:"transparent",outline:"2px solid var(--focus-outlineColor, var(--color-accent-emphasis))",outlineOffset:"-2px"}},children:[(0,i.jsx)(P.l.LeadingVisual,{children:n.renderLeadingVisual()}),(0,i.jsx)($.A,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n.text})]})}function eA(e,t){return Array.from(new Set([...e,...t]))}function e_(e){let t=(0,f.Vb)(e);switch(e.type){case"symbol":return{id:t,key:t,renderLeadingVisual:()=>(0,i.jsx)(u.CodeSquareIcon,{}),text:e.name};case"file":return{id:t,key:t,renderLeadingVisual:()=>(0,i.jsx)(u.FileIcon,{}),text:e.path};case"folder":return{id:t,key:t,renderLeadingVisual:()=>(0,i.jsx)(u.FileDirectoryFillIcon,{}),text:e.path};case"file-diff":return{id:t,key:t,renderLeadingVisual:()=>(0,i.jsx)(u.FileDiffIcon,{}),text:(0,f.Mw)(e)}}}async function ek(e,t,n){if(e.id&&"string"==typeof e.id&&e.text){let r=n.symbolSuggestions.get(e.text),a=n.fileSuggestions.get(e.text),i=n.folderSuggestions.get(e.text);r&&await n.addToReferences(r,t),a&&await n.addToReferences(a,t),i&&await n.addToReferences(i,t)}}try{ej.displayName||(ej.displayName="TopicReferencesSelectPanel")}catch{}try{eI.displayName||(eI.displayName="MultistepReferencesSelectPanel")}catch{}try{eR.displayName||(eR.displayName="ReferencesSelectPanel")}catch{}try{eC.displayName||(eC.displayName="ChooseRepositoryInstruction")}catch{}try{eN.displayName||(eN.displayName="ReferenceListItem")}catch{}function eE({panel:e,onPanelChange:t,anchorRef:n,...r}){let{inputRef:a}=r,o=(0,S.b)(),l=(0,C.Pk)(),c=(0,R.c)(),d=!!g.W.topicsAsReferences||(0,f.Z6)(l.currentTopic),m=l.renderKnowledgeBases&&(l.currentTopic&&(0,f.Z6)(l.currentTopic)||!l.currentTopic),{model:h}=(0,C.bP)("model"),y=g.W.attachImagesImmersive&&"immersive"===l.mode&&!!h.capabilities.supports.vision||!1,v=(0,O.kw)(r),w=(0,p.useRef)(null);return(0,i.jsxs)("div",{children:[y&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("input",{id:"image-uploader",hidden:!0,ref:w,type:"file",accept:x.s.getAllowedImageFileExtensions(h),onChange:e=>{if(!e.target.files)return;let t=e.target.files[0];e.currentTarget.value="",t&&new x.s(l,o,c).addImageAttachment(t,"menu")}})}),(0,i.jsx)(D.W,{anchorRef:n,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,i.jsx)(D.W.Overlay,{width:"small",side:"outside-top",align:"end",portalContainerName:"assistive"===l.mode?eh.E5:void 0,children:(0,i.jsxs)(P.l,{children:[(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:l.mode}),t("references")},inactiveText:d?void 0:"First attach a repository",children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.FileCodeIcon,{})}),"Files, folders, and symbols\u2026"]}),(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:l.mode}),t("repositories")},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.RepoIcon,{})}),g.W.topicsAsReferences?"Repositories":"Repository","\u2026"]}),m&&(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:l.mode}),t("knowledge-bases")},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.BookIcon,{})}),g.W.topicsAsReferences?"Knowledge bases":"Knowledge base","\u2026"]}),y&&(0,i.jsxs)(P.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:l.mode}),t(null),w.current?.click()},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.ImageIcon,{})}),"Image\u2026"]}),(0,i.jsx)(B,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>v(e.slug))})]})})}),g.W.topicsAsReferences?(0,i.jsx)(eI,{open:"references"===e,onOpenChange:e=>t(e?"references":null),submitReturnFocusRef:a,cancelReturnFocusRef:n}):(0,i.jsx)(ej,{open:"references"===e,onOpenChange:e=>t(e?"references":null),submitReturnFocusRef:a,cancelReturnFocusRef:n}),g.W.topicsAsReferences?(0,i.jsx)(ev.FZ,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:a,cancelReturnFocusRef:n}):(0,i.jsx)(ev.Ee,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:a,cancelReturnFocusRef:n}),(0,i.jsx)(ei,{disabledForPreviewModelsProps:{anchorRef:n},emptyKnowledgeBaseProps:{anchorRef:n},open:"knowledge-bases"===e,onOpenChange:e=>t(e?"knowledge-bases":null),submitReturnFocusRef:a,cancelReturnFocusRef:n}),"no-agents-available"===e&&(0,i.jsx)(H,{onClose:()=>t(null)}),"agents-not-supported"===e&&(0,i.jsx)(V,{onClose:()=>t(null)})]})}try{eE.displayName||(eE.displayName="AttachmentMenu")}catch{}var eT=n(70255),eL=n(91385);let eM="@agent:",eD=()=>{r?.abort(),r=new AbortController},eP=async e=>{let t=new URL("/copilot/chat/autocomplete/repositories",window.location.origin),n=new URLSearchParams;return n.set("q",e),t.search=n.toString(),await e$(t)??[]},eO=async(e,t)=>{let n=new URL("/copilot/chat/autocomplete/issues",window.location.origin),r=new URLSearchParams;return r.set("repo",e),r.set("q",t),n.search=r.toString(),await e$(n)??[]},eF=async(e,t)=>{let n=new URL("/copilot/chat/autocomplete/pulls",window.location.origin),r=new URLSearchParams;return r.set("repo",e),r.set("q",t),n.search=r.toString(),await e$(n)??[]},eB=async(e,t)=>{let n=new URL("/copilot/chat/autocomplete/discussions",window.location.origin),r=new URLSearchParams;return r.set("repo",e),r.set("q",t),n.search=r.toString(),await e$(n)??[]},e$=async e=>{let t;eD();try{t=await fetch(e,{method:"GET",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},signal:r.signal})}catch(e){if("AbortError"!==e.name)throw e}return t&&t.ok?await t.json():null},eU=["issues","pulls","discussions"],eW=e=>e&&("string"==typeof e?e:e?.value);function eq({children:e}){let{mode:t}=(0,C.Pk)(),[n,r]=(0,p.useState)(()=>"undefined"!=typeof document);(0,p.useEffect)(()=>r(!0),[]);let[a,o]=(0,p.useState)(null),[l,c]=(0,p.useState)([]),d=(0,p.useMemo)(()=>g.W.chatAutocomplete?[{triggerChar:"@",insertSpaceOnCommit:!1},{triggerChar:eM,insertSpaceOnCommit:!1}]:[{triggerChar:O.Z3,insertSpaceOnCommit:!0}],[]),m=(0,O.JE)(a?.trigger.triggerChar===O.Z3),h=(0,p.useCallback)(async(e,n="")=>(await eP(e)).map(e=>({value:`${e.nameWithOwner}${n}`,key:e.nameWithOwner,render:n=>(0,i.jsxs)(P.l.Item,{...n,onSelect:()=>(0,s.BI)("dotcom_chat.activate",{target:"REPO_MENU_ITEM_SELECTED",mode:t,command:e.nameWithOwner}),children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.RepoIcon,{})}),(0,i.jsx)("span",{className:"text-normal",children:e.name}),(0,i.jsx)(P.l.Description,{variant:"inline",truncate:!0,children:e.owner})]},e.nameWithOwner)})),[t]);(0,p.useEffect)(()=>{async function e(){if(!a)return;let e=a.query.toLowerCase(),n=t=>{let n=t.toLowerCase();return n.startsWith(e)&&n!==e};if(!g.W.chatAutocomplete&&a.trigger.triggerChar===O.Z3||g.W.chatAutocomplete&&a.trigger.triggerChar===eM){m.disabled&&c([]),m.loading&&c(["loading"]),""===e&&(0,s.BI)("dotcom_chat.activate",{target:"AGENT_COMMAND_MENU_TRIGGERED",mode:t}),c((m.availableAgents?.filter(e=>n(e.slug)).slice(0,10)??[]).map(e=>({value:e.slug,key:e.slug,render:n=>(0,i.jsxs)(P.l.Item,{...n,onSelect:()=>(0,s.BI)("dotcom_chat.activate",{target:"AGENT_COMMAND_MENU_ITEM_SELECTED",mode:t,command:e.slug}),children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(F.r,{src:e.avatarUrl})}),e.name,(0,i.jsxs)(P.l.Description,{variant:"inline",truncate:!0,children:[O.Z3,e.slug]}),m.showLimit&&(0,i.jsx)(P.l.Description,{variant:"block",children:"You're limited to one agent per thread."})]},e.slug)})));return}if(g.W.chatAutocomplete){let t,n;let r=e.match(/^([\w-.]+\/[\w-.]+)\/(\w+)\/([\d\w]*)$/)??[],a=r[3]??void 0;if([,t,n]=r,void 0!==t&&void 0!==n&&void 0!==a&&eU.includes(n)){let e=[];switch(n){case"issues":c(e=(await eO(t,a)).map(e=>({render:t=>(0,i.jsxs)(P.l.Item,{...t,children:[(0,i.jsxs)(P.l.LeadingVisual,{children:["draft"===e.state&&(0,i.jsx)(u.IssueDraftIcon,{className:"fgColor-neutral"}),"open"===e.state&&(0,i.jsx)(u.IssueOpenedIcon,{className:"fgColor-open"}),"closed"===e.state&&(0,i.jsx)(u.IssueClosedIcon,{className:"fgColor-done"})]}),(0,i.jsx)(Q.A,{title:e.title,maxWidth:350,children:e.title}),(0,i.jsxs)(P.l.TrailingVisual,{style:{marginLeft:"0.5rem"},children:["#",e.number]})]}),value:`${t}/issues/${e.number} `})));break;case"pulls":c(e=(await eF(t,a)).map(e=>({render:t=>(0,i.jsxs)(P.l.Item,{...t,children:[(0,i.jsxs)(P.l.LeadingVisual,{children:["draft"===e.state&&(0,i.jsx)(u.GitPullRequestDraftIcon,{className:"fgColor-warning"}),"open"===e.state&&(0,i.jsx)(u.GitPullRequestIcon,{className:"fgColor-open"}),"closed"===e.state&&(0,i.jsx)(u.GitPullRequestClosedIcon,{className:"fgColor-done"})]}),(0,i.jsx)(Q.A,{title:e.title,maxWidth:350,children:e.title}),(0,i.jsxs)(P.l.TrailingVisual,{style:{marginLeft:"0.5rem"},children:["#",e.number]})]}),value:`${t}/pulls/${e.number} `})));break;case"discussions":e=(await eB(t,a)).map(e=>({render:t=>(0,i.jsxs)(P.l.Item,{...t,children:[(0,i.jsxs)(P.l.LeadingVisual,{children:["open"===e.state&&(0,i.jsx)(u.CommentDiscussionIcon,{className:"fgColor-open"}),"closed"===e.state&&(0,i.jsx)(u.DiscussionClosedIcon,{className:"fgColor-muted"})]}),(0,i.jsx)(Q.A,{title:e.title,maxWidth:350,children:e.title}),(0,i.jsxs)(P.l.TrailingVisual,{style:{marginLeft:"0.5rem"},children:["#",e.number]})]}),value:`${t}/discussions/${e.number} `}))}e.length>1||eW(e[0])!==`${t}/${n}/${a}`?c(e):c([])}if([,t,n]=e.match(/^([\w-.]+\/[\w-.]+)\/(\w*)$/)??[],void 0!==t&&void 0!==n){let e=[{value:`${t} `,render:e=>(0,i.jsx)(P.l.Item,{...e,children:"Repository"})},{value:`${t}/discussions/`,render:e=>(0,i.jsx)(P.l.Item,{...e,children:"Discussion"})},{value:`${t}/issues/`,render:e=>(0,i.jsx)(P.l.Item,{...e,children:"Issue"})},{value:`${t}/pulls/`,render:e=>(0,i.jsx)(P.l.Item,{...e,children:"Pull Request"})}].filter(e=>(0,eL.qA)(n,"string"==typeof e?e:e.value));e.length>1||eW(e[0])!==`${t}/${n}/`?c(e):c([])}if([,t]=e.match(/^([\w-.]*\/?[\w-.]*)$/)??[],void 0!==t){let n=await h(e,"/");(!e||(0,eL.qA)("agent",e))&&n.unshift({value:"agent:",render:e=>(0,i.jsx)(P.l.Item,{...e,children:"Agent"})}),n.length>1||eW(n[0])!==`${t}/`?c(n):c([])}}}a?e():c([])},[m.availableAgents,m.disabled,m.loading,m.showLimit,h,t,a]);let f=(0,p.useCallback)(e=>{o(e)},[]),x=(0,p.useCallback)(()=>{o(null)},[]);return n?(0,i.jsx)(eT.a,{fullWidth:!0,suggestions:l,triggers:d,tabInsertsSuggestions:!1,onHideSuggestions:x,onShowSuggestions:f,children:e}):(0,i.jsx)("div",{children:e})}try{eq.displayName||(eq.displayName="Autocomplete")}catch{}let ez={container:"ChatInput-module__container--NFzCy",input:"ChatInput-module__input--iApWs",clicked:"ChatInput-module__clicked--hHA9l",attachments:"ChatInput-module__attachments--a9G6d",inputContainer:"ChatInput-module__inputContainer--BcExV",inputPreview:"ChatInput-module__inputPreview--f_0H3",token:"ChatInput-module__token--g4p0s",inputPreviewRef:"ChatInput-module__inputPreviewRef--SxNz0",trailingActions:"ChatInput-module__trailingActions--q2BNB",containerSmall:"ChatInput-module__containerSmall--PJkO5"};var eH=n(69676),eV=n(82678),eK=n(63867),eG=n(69425);let eX={container:"ChatInputReferences-module__container--kZx3r",attachmentsList:"ChatInputReferences-module__attachmentsList--c0Z3e",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--qEVr3",loading:"ChatInputReferences-module__loading--G1S4m",divider:"ChatInputReferences-module__divider--m7eF_",menuButton:"ChatInputReferences-module__menuButton--R82CM",functionLoading:"ChatInputReferences-module__functionLoading--_Tp1T"};var eJ=n(60068);let eZ=({className:e,isLoading:t,returnFocusRef:n,tokenSize:r="medium",onClickReference:a,getReferenceVersion:s})=>{let{currentReferences:o}=(0,C.Pk)(),c=(0,S.b)(),d=(0,p.useRef)(null),h=(0,eG.g)(d),g=(0,p.useMemo)(()=>(0,f.rT)(o),[o]),x=(0,p.useRef)(null);(0,eV.G)({containerRef:x,focusableElementFilter:e=>!e.hasAttribute("aria-hidden"),bindKeys:eH.z0.ArrowHorizontal|eH.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},[g]);let y=(0,p.useRef)([]),v=(e,t)=>{let r=y.current[t+1]??y.current[t-1]??n.current;r?.focus(),c.removeReference(e)},w=(0,p.useRef)(g);return((0,A.N)(()=>{if(w.current.length<g.length){let e=g.find(e=>!w.current.find(t=>(0,f.x_)(t,e))),t=e?g.indexOf(e):-1;y?.current?.[t]?.scrollIntoView({behavior:"smooth",inline:"end"})}w.current=g},[g]),0!==g.length||t)?(0,i.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:(0,m.$)(e,eX.container),ref:x,children:[(0,i.jsxs)("div",{className:(0,m.$)(eX.attachmentsList,h&&eX.scrolledToEnd,t&&eX.loading),ref:d,children:[g.map((e,t)=>"repository"===e.type?(0,i.jsx)(eQ,{reference:e,ref:e=>{y.current[t]=e},"data-index":t,size:r,onRemove:()=>v(e,t),onClick:a,getReferenceVersion:s},(0,f.Vb)(e)):(0,i.jsx)(eJ.B,{reference:e,ref:e=>{y.current[t]=e},"data-index":t,size:r,onRemove:()=>v(e,t),onClick:a,getReferenceVersion:s},(0,f.Vb)(e))),t&&(0,i.jsxs)("div",{className:eX.functionLoading,...(0,l.G)("loading-indicator"),children:[(0,i.jsx)(eK.A,{size:"small"}),"Retrieving\u2026"]})]}),(0,i.jsx)("div",{className:eX.divider}),(0,i.jsxs)(D.W,{children:[(0,i.jsx)(D.W.Anchor,{children:(0,i.jsx)(G.K,{icon:u.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:eX.menuButton,size:r})}),(0,i.jsx)(D.W.Overlay,{width:"small",children:(0,i.jsx)(P.l,{children:(0,i.jsxs)(P.l.Item,{onSelect:()=>{setTimeout(()=>n.current?.focus()),c.clearCurrentReferences()},children:[(0,i.jsx)(P.l.LeadingVisual,{children:(0,i.jsx)(u.TrashIcon,{})}),"Remove attachments"]})})})]})]}):null},eQ=(0,p.forwardRef)(function(e,t){let n=e.reference,r=(0,C.pn)(e=>e.model&&!e.model.hasLimitedCapabilities),a=`${n.ownerLogin}/${n.name}`,[s,o]=(0,en.vn)(a),l=(0,p.useRef)(!1),c=s.code===en.W5.Unindexed||s.docs===en.W5.Unindexed;return(0,p.useEffect)(function(){!l.current&&c&&r&&(l.current=!0,o())},[r,c,o]),(0,i.jsx)(eJ.B,{ref:t,...e})});try{eZ.displayName||(eZ.displayName="ChatInputReferences")}catch{}try{eQ.displayName||(eQ.displayName="RepoReferenceToken")}catch{}try{eQ.displayName||(eQ.displayName="RepoReferenceToken")}catch{}let eY=["issue","pull-request","discussion","figma"],e0=e=>{switch(e){case"issue":default:return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion"}},e1=e=>{let t=(0,C.Pk)(),n=(0,R.c)(),r=(0,S.b)(),a=r.maxMessagesReached(),v="loading"===t.slashCommandLoading.state,b=e.hideAttachmentButton||!1,{typingHasStarted:j,textAreaRef:I,textareaPreviewRef:E,textAreaPreviewContainerRef:L,text:M,setText:D,handleSubmit:P,handleSubmitToNewThread:O,handleScroll:F,handleChange:B,handleStop:$,handleFocus:U}=function(e){let t=(0,C.Pk)(),n=(0,S.b)(),r=(0,R.c)(),{selectedThreadID:a}=t,i=k.J.getSavedMessage(a),o=k.J.getSavedUserMessageOnError(a),[l,c]=(0,p.useState)(o??i??""),[d,u]=(0,p.useState)(!1),m=(0,N.X)(["mac"]),h=(0,p.useRef)(null),x=e.textAreaRef||h,y=(0,p.useRef)(null),v=(0,p.useRef)(null),w=t.messages.filter(e=>"user"===e.role),b=(0,p.useRef)(0),{search:j,pathname:I}=(0,_.zy)(),E=(0,p.useRef)(null),L=(0,p.useRef)(()=>{}),M=(0,p.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,p.useEffect)(()=>{if("immersive"!==t.mode)return;let e=new URLSearchParams(j).get("prompt");e&&("/copilot"===I||"/copilot/"===I)?(c(e),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"})):c("")},[j,I,t.mode]),(0,p.useEffect)(()=>{M()},[M]);let D=e=>m?e.metaKey:e.ctrlKey;(0,p.useEffect)(()=>{(async function(){if(g.W.topicsAsReferences)return;let e=t.currentTopic;e&&(0,f.Z6)(e)&&void 0!==t.currentTopic&&await r.fetchAutocompleteSuggestions(e,"")})()},[r,t.currentTopic]),(0,p.useEffect)(()=>{k.J.setSavedMessage(a,l)},[a,l]),(0,A.N)(()=>{let e=0;!function t(){if(!x.current||!v.current||!y.current)return;e++,0===x.current.scrollHeight&&e<10&&setTimeout(t,1),x.current.style.height="0";let n=x.current.scrollHeight,r=Math.min(n,300);y.current.style.height=`${n}px`,x.current.style.height=`${n}px`,v.current.style.height=`${r}px`}()},[l,x,y]);let P=async e=>{u(!0),"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.nativeEvent.isComposing?D(e)&&e.shiftKey&&"s"===e.key?(e.preventDefault(),await $()):"ArrowUp"===e.key&&x.current&&(""===x.current.value||b.current>0)&&0===x.current.selectionStart&&w?.length>b.current&&"assistive"===t.mode?(e.preventDefault(),b.current++,c(w[w.length-b.current].content||"")):"ArrowDown"===e.key&&b.current>0&&x.current&&x.current.selectionStart===x.current.value.length&&"assistive"===t.mode&&(e.preventDefault(),b.current--,0===b.current?c(""):c(w[w.length-b.current].content||"")):(e.preventDefault(),await B()),O()},O=(0,p.useCallback)(()=>{x?.current&&y?.current&&v?.current&&(y.current.scrollTop=x.current.scrollTop,y.current.scrollLeft=x.current.scrollLeft)},[x]),F=(0,p.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),B=async r=>{if(u(!1),k.J.clearSavedUserMessage(a),k.J.clearSavedUserMessageOnError(a),t.defaultRecipient&&!l.includes(`@${t.defaultRecipient}`)&&(t.defaultRecipient=void 0),r?.preventDefault(),"assistive"===t.mode&&await T(l,t,n)){(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:l}),"/new"===l.trim()&&k.J.setSavedMessageFast(a,null),c("");return}if(e.isLoading)e.onAbort?.();else{let t=l;if(!t){let[e,r]=n.tryInferMessage(F);if(!e||!r)return;t=r}c(""),await e.onSubmit?.(t)}},$=(0,p.useCallback)(()=>n.sendMessageToNewThread(a,l,F,t.context),[n,a,t.context,F,l]),U=(0,p.useCallback)(e=>{u(!0),x?.current&&(c(e.target.value),b.current=0,O())},[O,x]),W=(0,p.useCallback)(async()=>{await n.stopStreaming(),null!=a&&(n.startThreadReload(),await new Promise(e=>{E.current=setTimeout(()=>e(a),6e3)}),L.current=await n.fetchMessages(a,!0,!0))},[n,a]);return(0,p.useEffect)(()=>{L.current&&(L.current(),L.current=()=>{})},[t.messages]),(0,p.useEffect)(()=>()=>{E.current&&(clearTimeout(E.current),E.current=null),n.cancelThreadReload(),L.current=()=>{}},[n]),{typingHasStarted:d,textAreaRef:x,textareaPreviewRef:y,textAreaPreviewContainerRef:v,text:l,setText:c,handleSubmit:B,handleSubmitToNewThread:$,handleKeyDown:P,handleScroll:O,handleChange:U,handleStop:W,handleFocus:e=>{e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},shouldShowKnowledge:t.renderKnowledgeBases&&(t.currentTopic&&(0,f.Z6)(t.currentTopic)||!t.currentTopic)}}({isLoading:t.isWaitingOnCopilot||v||t.currentReferences.some(e=>"image"===e.type&&!e.attachment.isLoaded),onSubmit:e.onSubmit,onAbort:e.onAbort,textAreaRef:e.textAreaRef}),W=t.isWaitingOnCopilot?`Copilot is responding\u{2026}`:t.defaultRecipient?void 0:a?"Message limit reached. To continue chatting with Copilot, start a new conversation.":e.placeholder?e.placeholder:"Ask Copilot";t.defaultRecipient&&""===M&&!j&&D(`@${t.defaultRecipient} `);let[q,z]=(0,p.useState)([]),H=(0,p.useMemo)(()=>q.filter(e=>!e.loadedRefData),[q]),V=(0,o.E)({queries:H.map(e=>({enabled:g.W.copilotUIRefs,queryKey:["copilot","chat-links","item-url",e.originalText],queryFn:async()=>{let t;t=g.W.chatAutocomplete?"figma"===e.type?await (0,d.lS)(`/copilot/chat/validate-url?url=${e.originalText}`):"repo"===e.type?await (0,d.lS)(`/copilot/chat/reference/${e.repository.owner}/${e.repository.name}`):await (0,d.lS)(`/copilot/chat/reference/${e.repository.owner}/${e.repository.name}/${e0(e.type)}/${e.linkNumber}`):await (0,d.lS)(`/copilot/chat-links?item_url=${e.originalText}`);let n=await t.json();if(tt(n)||e2(n)||e8(n)||e9(n)||te(n))return n}})),combine:e=>({data:e.map(e=>e.data).filter(e=>!!e),pending:e.some(e=>e.isPending)})});(0,p.useEffect)(()=>{if(!V.pending&&V.data.length>0){let e=[...q];for(let n of V.data)(["issue","pull-request","discussion"].includes(n.type)||g.W.chatAutocomplete&&"repository"===n.type)&&(e=e.map(e=>tn(e,n)?{...e,loadedRefData:!0}:e),t.currentReferences.find(e=>(0,f.x_)(n,e))||r.addReference(n,"chatInput")),"immersive"!==t.mode||!g.W.immersiveFigmaIntegration||"figma"!==n.type||t.currentReferences.find(e=>(0,f.x_)(n,e))||(e=e.map(e=>tn(e,n)?{...e,id:n.id,loadedRefData:!0}:e),t.currentReferences.find(e=>(0,f.x_)(n,e))||r.addReference(n,"chatInput"));if(g.W.copilotUIRefs){let{processedText:n}=e4(M,e,"immersive"===t.mode,!0);D(n),z(e)}}},[V.data,V.pending,r,D,t.currentReferences,t.mode,M,q]);let K=(0,p.useRef)(t.currentReferences);(0,p.useEffect)(()=>{if(g.W.copilotUIRefs&&t.currentReferences.length<K.current.length){let e=q.map((e,n)=>t.currentReferences.find(t=>tn(e,t))?-1:n).filter(e=>-1!==e);z(q.filter((t,n)=>!e.includes(n)))}K.current=t.currentReferences},[t.currentReferences,q]);let G=(0,p.useRef)(null),[X,J]=(0,p.useState)(null),{model:Z}=(0,C.bP)("model"),Q=g.W.attachImagesImmersive&&"immersive"===t.mode&&!!Z.capabilities.supports.vision||!1,Y=(0,p.useCallback)((a,i)=>{let s=new x.s(t,r,n),o=new CopilotTextAttacher(r,e.existingFileNames),l=[];for(let e of a)Q&&x.s.isTypeAllowed(e.type,Z)?s.addImageAttachment(e,i):g.W.pasteTextFiles&&CopilotTextAttacher.isAttachable(e)?o.addAttachment(e):l.push(e.type);Q&&l.length>0&&(0,y.d)("included_unsupported_file",{fileTypes:l.join(","),uploadType:i})},[Q,Z,t,r,n,e.existingFileNames]),ee=(0,p.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer?.files;t&&Y(t,"drag")},[Y]),et=Q&&g.W.wholeAreaDragDrop;return(0,p.useEffect)(()=>{if(et)return;let e=I?.current;if(!e)return;let t=e=>e.preventDefault();return e.addEventListener("dragover",t),e.addEventListener("drop",ee),()=>{e.removeEventListener("dragover",t),e.removeEventListener("drop",ee)}},[I,et,ee]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.tL,{commands:{"github:cancel":()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:t.mode}),$()},"copilot-chat:send-message":()=>{z([]),P()},"copilot-chat:send-message-new-conversation":()=>void O(),"copilot-chat:add-attachment":()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:t.mode}),J("attachment-types"===X?null:"attachment-types")},"copilot-chat:edit-last-message":0===M.length?()=>{let e=t.messages.findLast(e=>"user"===e.role)?.id;e&&r.startEditingMessage(e)}:void 0,"copilot-chat:deep-codesearch":()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:t.mode}),r.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!t.skillOptions?.deepCodeSearch})}},children:(0,i.jsxs)("form",{className:(0,m.$)(ez.container,{[ez.containerSmall]:"small"===e.size}),children:[(0,i.jsx)(eZ,{className:ez.attachments,returnFocusRef:G,tokenSize:"small"===e.size?"small":"medium",isLoading:V.pending&&q.some(e=>!e.loadedRefData),onClickReference:e.onClickReference,getReferenceVersion:e.getReferenceVersion}),(0,i.jsxs)(c.tL.LimitKeybindingScope,{commandIds:["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],className:ez.inputContainer,ref:L,children:[(0,i.jsx)(eq,{children:(0,i.jsx)("textarea",{autoFocus:!0,id:h.wg,className:ez.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:e=>{let n=e.clipboardData;if(n?.items){let r=[];for(let a=0;a<n.items.length;a++){let i=n.items[a];if(i&&"file"===i.kind){let e=i.getAsFile();e&&r.push(e)}if(i&&"string"===i.kind&&["text","text/plain"].includes(i.type)){let a=n.getData(i.type);if(g.W.pasteTextFiles&&a.length>500){let e=new File([a],"",{type:w});CopilotTextAttacher.isAttachable(e)&&r.push(e)}else if(g.W.copilotUIRefs){e.preventDefault();let{processedText:n,processedRefs:r}=e4(`${M.substring(0,I?.current?.selectionStart??0)}${a}${M.substring(I?.current?.selectionEnd??0,M.length)}`,q,"immersive"===t.mode);D(n),z(r)}}}r.length>0&&(e.preventDefault(),Y(r,"paste"))}},ref:I,onScroll:F,onChange:e=>{if(B(e),g.W.copilotUIRefs){let{processedText:n,processedRefs:a}=e4(e.target.value,q,"immersive"===t.mode,!0);if(D(n),z(a),a.length<K.current.length)for(let e of K.current.filter(e=>eY.includes(e.type)&&!a.find(t=>tn(t,e))))r.removeReference(e)}},onFocus:U,placeholder:W,value:M,"data-react-autofocus":!0,disabled:a,...(0,l.G)("copilot-chat-input-textarea")})}),(0,i.jsx)(e3,{text:M,textareaPreviewRef:E,textInputRefs:q,size:e.size})]}),(0,i.jsxs)("div",{className:ez.trailingActions,children:[g.W.showDeepCodeSearchButton&&(0,i.jsx)(c.N5,{commandId:"copilot-chat:deep-codesearch",icon:u.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,m.$)({[ez.clicked]:t.skillOptions?.deepCodeSearch})}),!b&&(0,i.jsx)(c.N5,{commandId:"copilot-chat:add-attachment",icon:u.PaperclipIcon,variant:"invisible",ref:G,tooltipDirection:"n"}),e.isStreaming||t.isWaitingOnCopilot?(0,i.jsx)(e7,{}):(0,i.jsx)(e6,{isLoading:v||t.currentReferences.some(e=>"image"===e.type&&!e.attachment.isLoaded)})]})]})}),(0,i.jsx)(eE,{inputRef:I,inputOnChange:B,anchorRef:G,panel:X,onPanelChange:J})]})};function e3(e){let{text:t,textareaPreviewRef:n,textInputRefs:r}=e,{mention:a,textAfterMention:s}=function({text:e,textareaPreviewRef:t}){let n=(0,S.b)(),r=(0,C.Pk)(),[a,i]=(0,p.useState)(""),[s,o]=(0,p.useState)(""),{agents:l,customCopilots:c,agentsPath:d,messages:u}=(0,C.Pk)();return(0,p.useEffect)(()=>{if(!t.current)return;let r=e.match(/^@\S+/g);if(r&&r.length>0){let t;!l&&d&&n.fetchAgents(d),g.W.customCopilots&&!c&&n.fetchCustomCopilots();let a=[];if(l&&a.push(...l),c&&a.push(...c),0===a.length)return;let s=(0,f.Q7)(u);if(s.length>0){let e=s[0];t=a.filter(t=>M(t)===e.name)}else t=a;let m=r[0],p=m.substring(1);if(t.find(e=>M(e)===p)){i(m),o(e.replace(m,""));return}}i(""),o("")},[l,d,c,n,u,r.mode,e,t]),{mention:a,textAfterMention:s}}(e),o=function(e,t){let n=[],r=e.split(/(\s+)/);for(let e=0;e<r.length;e++){let a=r[e],s=a,o=t.find(e=>e.processedText===a);(o?.loadedRefData||o?.type==="figma")&&(s=(0,i.jsx)("span",{className:ez.inputPreviewRef,...(0,l.G)("input-preview-ref"),children:o.processedText},`${o.originalText}-${e}`)),n.push(s)}return n}(t,r);return(0,i.jsx)("div",{id:"copilot-chat-textarea-preview",...(0,l.G)("copilot-chat-input-textarea-preview"),"aria-hidden":!0,className:ez.inputPreview,ref:n,role:"presentation",children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:ez.token,children:a}),s]}):(0,i.jsx)(i.Fragment,{children:o})})}function e6({isLoading:e}){return(0,i.jsx)(c.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:u.PaperAirplaneIcon,"aria-label":"Send now",disabled:e,tooltipDirection:"n"})}function e7(){return(0,i.jsx)(c.N5,{...(0,l.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:u.SquareFillIcon,tooltipDirection:"n",sx:{bg:"danger.subtle",color:"danger.fg",":hover":{bg:"danger.muted"}}})}function e4(e,t,n,r=!1){let a=[],i=/^(?:http:\/\/github\.localhost|https:\/\/github\.com)\/[^/]+\/[^/]+\/(issues|pull|discussions)\/\d+$/,s=/^https:\/\/www\.figma\.com\/.+$/,o=/^@([\w-.]+\/[\w-.]+)$/,l=/^@([\w-.]+\/[\w-.]+)\/(\w+)\/(\d+)$/,c=e.split(/(\s+)/);return{processedText:c.map((e,d)=>{let u=a.find(t=>t.originalText===e||t.processedText===e);if(u)return u.loadedRefData?u.processedText:u.originalText;let m=t.find(t=>t.originalText===e||t.processedText===e);if(m)return(a.push(m),m.loadedRefData)?m.processedText:m.originalText;if(n&&g.W.immersiveFigmaIntegration&&s.test(e)){if(r&&d===c.length-1)return e;let t=e.replace("https://www.","");return a.push({originalText:e,processedText:`${t.length>30?`${t.substring(0,30)}...`:t}`,type:"figma"}),e}if(i.test(e)){if(r&&d===c.length-1)return e;let t=e.split("/"),n=t[t.length-1],i=t[t.length-2],s=t[t.length-3],o=t[t.length-4];return a.push({originalText:e,processedText:`@${o}/${s}/${i}/${n}`,type:e5(i),linkNumber:Number(n),repository:{name:s,owner:o}}),e}if(o.test(e)){if(r&&d===c.length-1)return e;let t=e.match(o),n=t?.[1];if(n){let t=n.split("/"),r=t[0],i=t[1];a.push({originalText:e,processedText:e,type:"repo",repository:{name:i,owner:r}})}return e}if(l.test(e)){if(r&&d===c.length-1)return e;let t=e.match(l),n=t?.[1],i=e5(t?.[2]),s=t?.[3];if(n&&i&&s){let t=n.split("/"),r=t[0],o=t[1];a.push({originalText:e,processedText:e,type:i,linkNumber:Number(s),repository:{name:o,owner:r}})}}return e}).join(""),processedRefs:a}}function e5(e){switch(e){case"discussions":return"discussion";case"pull":return"pull-request";default:return"issue"}}let e2=e=>"issue"===e.type,e8=e=>"pull-request"===e.type,e9=e=>"discussion"===e.type,te=e=>"figma"===e.type,tt=e=>"repository"===e.type,tn=(e,t)=>{switch(e.type){case"issue":case"discussion":case"pull-request":return e.type===t.type&&e.linkNumber===t.number;case"repo":return"repository"===t.type&&e.repository.owner===t.ownerLogin&&e.repository.name===t.name;case"figma":return e.type===t.type&&e.originalText===t.url;default:return!1}};try{e1.displayName||(e1.displayName="ChatInput")}catch{}try{e3.displayName||(e3.displayName="TextareaPreview")}catch{}try{e6.displayName||(e6.displayName="SubmitButton")}catch{}try{e7.displayName||(e7.displayName="StopButton")}catch{}},97891:(e,t,n)=>{n.d(t,{h:()=>s});var r=n(74848),a=n(34614);let i={container:"LegalDisclaimer-module__container--f7xb5"},s=()=>(0,r.jsxs)("span",{className:i.container,children:[(0,r.jsx)(a.A,{href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-chat-in-githubcom",inline:!0,muted:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]});try{s.displayName||(s.displayName="LegalDisclaimer")}catch{}},80938:(e,t,n)=>{n.d(t,{Y:()=>I,k:()=>R});var r=n(74848),a=n(64542),i=n(62456),s=n(46988),o=n(38621),l=n(89323),c=n(91321),d=n(87330),u=n(8338),m=n(53526),p=n(63867),h=n(74144),f=n(37827),g=n(96540),x=n(47767),y=n(93589),v=n(65615),w=n(7426),b=n(27297);let j={messageRetryButtonGroup:"ModelPicker-module__messageRetryButtonGroup--LwA2d",messageRetryDivider:"ModelPicker-module__messageRetryDivider--ueL1f",messageRetryMenuButton:"ModelPicker-module__messageRetryMenuButton--C2DRW",messageRetryButton:"ModelPicker-module__messageRetryButton--AuxIi"};function I({onNewThreadSelected:e,limited:t,type:n="global",selectedModel:a,onModelSelected:i,disabled:o=!1}){let l=(0,w.b)(),{model:c,availableModels:d,mode:u,messages:m,currentReferences:p}=(0,v.Pk)(),h=(0,v.pn)(e=>"pending"===e.modelsLoading.state),{search:f,pathname:j}=(0,x.zy)(),[I,C]=(0,g.useState)(null);a||(a=c??b.UB);let S=d??[b.UB];return((0,g.useEffect)(()=>{h&&l.fetchModels()},[l,h]),(0,g.useEffect)(()=>{if("immersive"!==u)return;let e=new URLSearchParams(f).get("model");if(e&&("/copilot"===j||"/copilot/"===j)){if(c.id===e)return;let t=d?.find(t=>t.id===e);t&&(l.selectModel(t,"url"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_MODEL_LOADED_FROM_URL",mode:"immersive"}))}},[d]),S.length<2)?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{selectedModel:a,models:S,type:n,onModelPicked:e=>{("global"!==n||e.id!==a.id)&&((0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_MODEL_SELECT",mode:"immersive",model:e.id,isUnchanged:e.id===a.id,type:n}),("message-retry"===n?(0,y.B)(m):m).some(e=>e.skillExecutions?.length)&&(!e.capabilities.supports.tool_calls||e.isThirdParty||"o1-ga"===e.capabilities.family)?C({model:e,command:{action:"requires-new-conversation",reason:"external-content"}}):(("message-retry"===n?(0,y.B)(m):m).some(e=>e.mediaContent?.length)||p.some(e=>"image"===e.type))&&!e.capabilities.supports.vision?C({model:e,command:{action:"requires-new-conversation",reason:"degraded-image-support"}}):e.policy&&"enabled"!==e.policy.state?C({model:e,command:{action:"requires-policy-approval"}}):i?i(e):l.selectModel(e))},limited:t,disabled:o,variant:"invisible"}),I?.command.action==="requires-new-conversation"&&(0,r.jsx)(N,{model:I.model,reason:I.command.reason,onDismiss:()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_REQUIRES_NEW_CONVERSATION_CANCEL",mode:"immersive",model:I.model.id,type:n}),C(null)},onSwitch:async()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_REQUIRES_NEW_CONVERSATION_CONFIRM",mode:"immersive",model:I.model.id,type:n}),C(null),await e(),l.selectModel(I.model)}}),I?.command.action==="requires-policy-approval"&&(0,r.jsx)(A,{model:I.model,onDismiss:()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_POLICY_CANCEL",mode:"immersive",model:I.model.id,type:n}),C(null)},onConfirm:async()=>{await l.acceptModelPolicy(I.model),l.selectModel(I.model),(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_POLICY_CONFIRM",mode:"immersive",model:I.model.id,type:n}),C(null)}})]})}function R({selectedModel:e,models:t,onModelPicked:n,limited:a=!1,type:i,disabled:m,variant:p="invisible"}){let h=t.filter(e=>!e.preview),f=t.filter(e=>e.preview),x=new Set(t.map(e=>e.vendor)).size>1,y=t.some(e=>e.isThirdParty),v=a?E:[],w=(0,g.useCallback)(()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_OPEN",mode:"immersive",model:e.id,type:i})},[e.id,i]),b=(0,g.useRef)(null),[I,R]=(0,g.useState)(null);return(0,g.useEffect)(()=>{b.current&&R(b.current.getBoundingClientRect().bottom>window.innerHeight/1.55?"up":"down")},[I]),(0,r.jsx)("div",{ref:b,children:(0,r.jsxs)(l.W,{children:["global"===i?(0,r.jsxs)(l.W.Button,{onClick:w,"aria-label":"Switch model",variant:p??"invisible",disabled:m,children:[(0,r.jsx)("span",{className:"sr-only",children:"Model: "}),e.displayName]}):(0,r.jsx)(l.W.Anchor,{onClick:w,"aria-label":"Retry with model",children:(0,r.jsxs)(c.A,{className:j.messageRetryButtonGroup,children:[(0,r.jsx)(d.K,{variant:"invisible","aria-label":`Retry with ${e.displayName}`,onClick:()=>n(e),icon:o.SyncIcon,disabled:m,className:j.messageRetryButton}),(0,r.jsx)("div",{className:j.messageRetryDivider}),(0,r.jsx)(d.K,{variant:"invisible",icon:o.TriangleDownIcon,"aria-label":"Retry with\u2026",disabled:m,onClick:()=>{R(null)},className:j.messageRetryMenuButton})]})}),(0,r.jsx)(l.W.Overlay,{width:"global"===i?"medium":"small",align:"center",children:(0,r.jsxs)(u.l,{selectionVariant:"global"===i?"single":void 0,children:["message-retry"===i&&"down"===I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{selectedModel:e,onModelPicked:n}),(0,r.jsx)(u.l.Divider,{})]}),h.length>0&&(0,r.jsxs)(u.l.Group,{children:[(0,r.jsx)(u.l.GroupHeading,{children:"Models"}),h.map(t=>(0,r.jsx)(S,{model:t,selected:t.id===e.id&&"global"===i,onModelPicked:n,hasMultipleVendors:x,hasThirdPartyModel:y},t.id))]}),(f.length>0||v.length>0)&&(0,r.jsxs)(u.l.Group,{children:[(0,r.jsx)(u.l.GroupHeading,{children:"Preview"}),f.map(t=>(0,r.jsx)(S,{model:t,selected:t.id===e.id&&"global"===i,onModelPicked:n,hasMultipleVendors:x,hasThirdPartyModel:y},t.id)),v.map(e=>(0,r.jsxs)(u.l.LinkItem,{href:k,children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(_,{model:e})}),e.displayName,(0,r.jsx)(u.l.Description,{variant:"block",truncate:!0,children:e.vendor}),(0,r.jsx)(u.l.TrailingVisual,{children:(0,r.jsx)("div",{className:"fgColor-muted",children:"Upgrade"})})]},e.id))]}),"message-retry"===i&&"up"===I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(C,{selectedModel:e,onModelPicked:n})]})]})})]})})}function C({selectedModel:e,onModelPicked:t}){return(0,r.jsxs)(u.l.Item,{onSelect:()=>t(e),children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(o.SyncIcon,{})}),"Try again",(0,r.jsx)(u.l.Description,{variant:"block",truncate:!0,children:e.displayName})]},e.id)}function S({model:e,selected:t,onModelPicked:n,hasMultipleVendors:a,hasThirdPartyModel:i}){return(0,r.jsxs)(u.l.Item,{onSelect:()=>n(e),selected:t,children:[(a||i)&&(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(_,{model:e})}),e.displayName,(a||i)&&(0,r.jsx)(u.l.Description,{variant:"block",truncate:!0,children:e.vendor})]},e.id)}function N({model:e,onDismiss:t,onSwitch:n,reason:a}){return(0,r.jsxs)(m.K,{title:"Switch model",onClose:e=>"confirm"===e?n():t(),confirmButtonContent:"New conversation",confirmButtonType:"primary",children:["external-content"===a&&(0,r.jsxs)("p",{children:["The ",e.displayName," model currently doesn\u2019t support external context from ongoing conversations. Start a new conversation to chat with this model."]}),"degraded-image-support"===a&&(0,r.jsxs)("p",{children:["The ",e.displayName," model doesn\u2019t support answering questions about images. Start a new conversation without images to chat with this model."]})]})}function A({model:e,onDismiss:t,onConfirm:n}){let[i,s]=(0,g.useState)(null),[o,l]=(0,g.useState)(!1),c=e.policy?.terms??"",d=async()=>{try{l(!0),await n(),s(null)}catch{s("An error occurred while updating the policy")}finally{l(!1)}};return(0,r.jsxs)(h.l,{width:"large",onClose:t,title:`Enable ${e.displayName}`,footerButtons:[{buttonType:"default",content:"Cancel",onClick:t},{buttonType:"primary",content:o?(0,r.jsx)(p.A,{sx:{mx:2},size:"small"}):"Enable",onClick:()=>void d()}],children:[i&&(0,r.jsx)(f.l,{title:"Error",variant:"critical",children:i}),(0,r.jsx)(a.To,{markdown:c})]})}function _({model:e}){return e.logoURL?(0,r.jsx)(i.r,{alt:`${e.vendor} logo`,square:!0,size:18,src:e.logoURL}):(0,r.jsx)(o.CopilotIcon,{})}let k="https://github.com/features/copilot#pricing",E=[{id:"claude-3.7-sonnet-upgrade",displayName:"Claude 3.7 Sonnet",vendor:"Anthropic",logoURL:"/images/modules/marketplace/models/families/anthropic.svg"},{id:"o1-upgrade",displayName:"o1",vendor:"Azure OpenAI",logoURL:"/images/modules/marketplace/models/families/openai.svg"}];try{I.displayName||(I.displayName="ModelPicker")}catch{}try{R.displayName||(R.displayName="ModelPickerDesign")}catch{}try{C.displayName||(C.displayName="RetryListItem")}catch{}try{S.displayName||(S.displayName="ModelListItem")}catch{}try{N.displayName||(N.displayName="NewConversationConfirmationDialog")}catch{}try{A.displayName||(A.displayName="ModelPolicyConfirmationDialog")}catch{}try{_.displayName||(_.displayName="ModelVendorIcon")}catch{}},89401:(e,t,n)=>{n.d(t,{Cb:()=>h,Dq:()=>c,E5:()=>l,Gj:()=>d,UJ:()=>g,cB:()=>m,f1:()=>u,hl:()=>f,zc:()=>p});var r=n(74848),a=n(16255),i=n(75177),s=n(89323),o=n(96540);let l="copilotChatMenuPortalRoot",c="copilotChatMessagesMenuPortalRoot",d="copilotChatPortalRoot",u="copilotChatTopicPickerPortalRoot",m=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,a.c)(e.current,d)},[]),(0,r.jsx)(i.A,{ref:e,sx:{position:"absolute",top:0,right:0,zIndex:100}})},p=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,a.c)(e.current,l)},[]),(0,r.jsx)(i.A,{ref:e,sx:{position:"absolute",top:0,right:0}})},h=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,a.c)(e.current,c)},[]),(0,r.jsx)("div",{ref:e})},f=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,a.c)(e.current,u)},[]),(0,r.jsx)("div",{ref:e})},g=({children:e,portalContainerName:t,...n})=>{let[a,i]=(0,o.useState)(()=>"undefined"!=typeof document);return((0,o.useEffect)(()=>i(!0),[]),a)?(0,r.jsx)(s.W.Overlay,{...n,portalContainerName:t||l,children:e}):null};try{m.displayName||(m.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{h.displayName||(h.displayName="MessagesPortalContainer")}catch{}try{f.displayName||(f.displayName="TopicPickerPortalContainer")}catch{}try{g.displayName||(g.displayName="ActionMenuOverlay")}catch{}},60068:(e,t,n)=>{n.d(t,{B:()=>w,a:()=>b});var r,a=n(74848),i=n(91295),s=n(38621),o=n(87330),l=n(63867),c=n(47523),d=n(35642),u=n(34164),m=n(96540),p=n(82610),h=n(65615),f=n(7426),g=n(54006),x=n(90591);let y={referenceToken:"ReferenceToken-module__referenceToken--MoDht",small:"ReferenceToken-module__small--LxJV_",loadingName:"ReferenceToken-module__loadingName--OEUm0",name:"ReferenceToken-module__name--Wq2Bs",trailingVisual:"ReferenceToken-module__trailingVisual--JeIeK",removeButton:"ReferenceToken-module__removeButton--BIbYP",icon:"ReferenceToken-module__icon--WJse5",openIcon:"ReferenceToken-module__openIcon--LVVWZ",closedIcon:"ReferenceToken-module__closedIcon--qYsTG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--ivG0w",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--S1IFs",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--PpoUe",figmaIcon:"ReferenceToken-module__figmaIcon--x5K98"};var v=n(12649);let w=(0,m.forwardRef)(function({reference:e,onClick:t,onRemove:n,size:r,getReferenceVersion:i},l){let g=(0,f.b)(),x=(0,h.pn)(e=>"immersive"===e.mode),w=b(e,(0,p.P)((0,h.A3)("currentTopic"))),j=(0,m.useId)(),I=i?.(e);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:(0,p.JP)(e),className:(0,u.$)(y.referenceToken,"small"===r&&y.small),onKeyDown:e=>{n&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),n())},onClick:n=>{t&&(t(n,e),n.defaultPrevented)||x||(("issue"===e.type||"pull-request"===e.type||"discussion"===e.type)&&(window.open(e.url,"_blank"),self.focus()),["repository","folder","docset","third-party","image","issue","pull-request"].includes(e.type)||(n.preventDefault(),g.selectReference(e)))},ref:l,"aria-describedby":n&&j,children:[w&&(0,a.jsx)(w,{size:w===c.N?16:"small",className:(0,u.$)(y.icon,w===s.IssueOpenedIcon&&y.openIcon,w===s.GitPullRequestIcon&&y.openIcon,w===s.IssueClosedIcon&&y.closedIcon,w===s.GitPullRequestClosedIcon&&y.pullRequestClosedIcon,w===s.GitMergeIcon&&y.pullRequestMergedIcon)}),"loading"===e.type?(0,a.jsx)("span",{className:y.loadingName,children:(0,a.jsx)(d.r,{"aria-label":(0,p.z$)(e)})}):(0,a.jsx)("span",{className:y.name,children:(0,p.z$)(e)}),void 0!==I&&(0,a.jsx)("span",{className:y.trailingVisual,children:(0,a.jsx)(v.g,{version:I})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.K,{tabIndex:-1,"aria-hidden":!0,size:r,icon:s.XIcon,"aria-label":"Remove",onClick:e=>{e.stopPropagation(),e.preventDefault(),n()},tooltipDirection:"n",variant:"invisible",className:y.removeButton}),(0,a.jsx)("span",{hidden:!0,id:j,children:"press backspace or delete to remove"})]})]})})});function b(e,t){switch(e.type){case"figma":return j;case"file":return s.FileIcon;case"folder":return s.FileDirectoryFillIcon;case"file-diff":return s.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&g.Y.has(e.languageName)?s.BookIcon:s.CodeIcon;case"repository":return s.RepoIcon;case"symbol":return s.CodeSquareIcon;case"docset":return s.BookIcon;case"commit":return s.GitCommitIcon;case"pull-request":return function(e){if("pull-request"===e.type){if(e.draft&&"open"===e.state)return s.GitPullRequestDraftIcon;switch(e.state){case"open":default:return s.GitPullRequestIcon;case"closed":return s.GitPullRequestClosedIcon;case"merged":return s.GitMergeIcon}}}(e);case"repo-instructions":case"org-instructions":return s.NoteIcon;case"image":return"attachment"in e&&!e.attachment.isLoaded?l.A:s.ImageIcon;case"issue":case"thread-scoped-issue":return function(e){if("issue"===e.type||"thread-scoped-issue"===e.type){if("thread-scoped-issue"===e.type)return s.IssueDraftIcon;switch(e.state){case"open":default:return s.IssueOpenedIcon;case"closed":return s.IssueClosedIcon;case"not_planned":return s.SkipIcon}}}(e);case"discussion":return s.CommentDiscussionIcon;case"web-search-result":return function(e){if("web-search-result"===e.type)return"bing_search"===e.reference_type?i._:s.GlobeIcon}(e);case"thread-scoped-file":return"language"in e&&g.Y.has(e.language)?s.MarkdownIcon:s.CodeIcon;case"loading":return c.N;default:return}}function j(){return(0,a.jsx)("div",{className:y.figmaIconOuter,children:(0,a.jsx)(x._,{className:y.figmaIcon})})}try{w.displayName||(w.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{j.displayName||(j.displayName="StylizedFigmaIcon")}catch{}},61818:(e,t,n)=>{n.d(t,{Ee:()=>w,FZ:()=>b,X1:()=>j});var r=n(74848),a=n(46988),i=n(70642),s=n(53949),o=n(8338),l=n(61597),c=n(34164),d=n(96540),u=n(40961),m=n(41980),p=n(1750),h=n(82610),f=n(37937),g=n(65615),x=n(7426),y=n(89401),v=n(59010);function w(e){let{selectedThreadID:t,currentTopic:n}=(0,g.Pk)(),a=(0,x.b)(),i=(0,d.useCallback)(async e=>{f.J.setSelectedTopic(t??"",e.toString()),a.clearCurrentReferences(["image","issue"]),await a.fetchCurrentRepo(e)},[a,t]);return(0,r.jsx)(j,{...e,selectionVariant:"instant",selectedRepoIds:new Set(n?[n.id]:[]),onSelectRepo:i,description:"Choose a repository to chat about."})}function b(e){let{currentReferences:t}=(0,g.Pk)(),n=(0,x.b)(),a=t.filter(e=>"repository"===e.type),i=new Set(a.map(e=>e.id)),[s,o]=(0,d.useState)(),l=async t=>{o(void 0);let r=a.find(e=>e.id===t);if(r){n.removeReference(r);return}let i=await n.service.fetchRepo(t);if(!i.ok){o("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let s=(0,h.qS)(i.payload);n.addReference(s,"repoMenu")};return(0,r.jsx)(j,{...e,selectionVariant:"multiple",selectedRepoIds:i,onSelectRepo:l,description:"Choose repositories to chat about.",error:s})}function j({open:e,onOpenChange:t,submitReturnFocusRef:n,cancelReturnFocusRef:h,selectedRepoIds:f,featuredRepoIds:x=f,onSelectRepo:w,selectionVariant:b,description:j,error:I}){let{currentRepository:R,ssoOrganizations:C}=(0,g.Pk)(),[S,N]=(0,d.useState)(!0),[A,_]=(0,d.useState)("");(0,d.useEffect)(()=>{e||_("")},[e]);let[k,E]=(0,d.useState)(void 0),{repositories:T,loading:L}=(0,m.U)(A,k,E,e,R),M=(0,d.useMemo)(()=>L?"Loading repositories":0===T.length?"No repositories found":1===T.length?"1 repository found":`${T.length} repositories found`,[L,T.length]);(0,d.useEffect)(()=>{T.length>0&&S&&N(!1)},[T.length,S]);let D=(0,d.useMemo)(()=>C?C.map(e=>e.login):[],[C]),{featuredRepos:P,nonFeaturedRepos:O}=(0,p.O)(T,e=>x.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos"),[F,B]=(0,d.useState)(!1),$=async e=>{B(!0),await w(e),B(!1)};return(0,r.jsx)("div",{...(0,s.G)("repo-select-panel"),children:(0,r.jsxs)(l.X,{width:"large",maxHeight:"xlarge",onCancel:()=>{(0,u.flushSync)(()=>t(!1)),h.current?.focus(),(0,a.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},onSubmit:()=>{(0,u.flushSync)(()=>t(!1)),n.current?.focus()},open:e,variant:"modal",selectionVariant:b,title:"multiple"===b?"Select repositories":"Select a repository",description:j,children:[(0,r.jsx)(l.X.Header,{className:(0,c.$)(D.length>0&&"border-bottom-0"),children:(0,r.jsx)(l.X.SearchInput,{loading:L&&!S||F,onChange:e=>{_(e.currentTarget.value)},placeholder:"Search repositories","aria-label":"Search repositories"})}),(0,r.jsx)(i.x,{portalContainerName:y.f1,protectedOrgs:D,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${location.href}`,isDisplayedInSelectPanel:!0}),(0,r.jsx)(y.hl,{}),I&&(0,r.jsx)(l.X.Message,{variant:"error",size:"inline",children:I}),(0,r.jsxs)(o.l,{sx:{minHeight:340},children:[(0,r.jsx)("div",{role:"status",className:"sr-only",children:M}),L&&S?(0,r.jsx)(l.X.Loading,{children:"Fetching repositories\u2026"}):0!==T.length||L?(0,r.jsxs)(r.Fragment,{children:[P?.map(e=>r.jsx(v.W,{repo:e,onSelect:$,selected:f.has(e.databaseId)},e.databaseId)),P&&O&&(0,r.jsx)(o.l.Divider,{}),O?.map(e=>r.jsx(v.W,{repo:e,onSelect:$,selected:f.has(e.databaseId)},e.databaseId))]}):(0,r.jsx)(l.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})]})]})})}try{w.displayName||(w.displayName="RepoTopicSelectPanel")}catch{}try{b.displayName||(b.displayName="RepoReferencesSelectPanel")}catch{}try{j.displayName||(j.displayName="RepoSelectPanel")}catch{}},59010:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(74848),a=n(62456),i=n(8338);function s({onSelect:e,repo:t,selected:n,trailingVisualComponent:s}){let{databaseId:o,isInOrganization:l,nwo:c,ownerAvatarUrl:d}=t;return(0,r.jsxs)(i.l.Item,{onSelect:()=>e(o),selected:n,children:[(0,r.jsx)(i.l.LeadingVisual,{children:(0,r.jsx)(a.r,{src:d,square:l,size:16})}),c,s&&(0,r.jsx)(i.l.TrailingVisual,{children:s})]},c)}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},12649:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(74848),a=n(2676);let i={version:"VersionName-module__version--DI4zD"};function s({"data-testid":e,version:t}){return(0,r.jsxs)(a.A,{className:i.version,as:"span","data-testid":e,children:["v",t]})}try{s.displayName||(s.displayName="VersionName")}catch{}},90591:(e,t,n)=>{n.d(t,{_:()=>a});var r=n(74848);function a({className:e,...t}){return(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,...t,children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})})]})}try{a.displayName||(a.displayName="FigmaIcon")}catch{}},16184:(e,t,n)=>{n.d(t,{O:()=>R});var r=n(74848),a=n(38621),i=n(75177),s=n(84217),o=n(87330),l=n(55847),c=n(8338),d=n(63867),u=n(30729),m=n(96540);function p({children:e}){return(0,r.jsx)(i.A,{sx:{overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},children:(0,r.jsx)(i.A,{sx:{overflow:"hidden",backgroundColor:"canvas.default"},children:(0,r.jsx)(i.A,{sx:{display:"flex",flexDirection:"column"},children:e})})})}function h({children:e,onDismiss:t}){return(0,r.jsxs)(s.A,{as:"h3",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},children:[(0,r.jsx)(i.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},children:e}),t&&(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:a.XIcon,onClick:t,variant:"invisible",sx:{flexShrink:0}})]})}function f({children:e}){return(0,r.jsx)(i.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},children:e})}function g({children:e,title:t,initiallyOpen:n}){let[i,s]=(0,m.useState)(n??!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Q,{onClick:()=>s(e=>!e),sx:{borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},children:[(0,r.jsx)(u.A,{icon:i?a.ChevronDownIcon:a.ChevronRightIcon,sx:{mr:2}}),t]}),i&&e]})}function x({children:e}){return(0,r.jsx)(i.A,{sx:{padding:3},children:e})}function y({direction:e,onExpand:t}){return(0,r.jsx)(l.Q,{onClick:t,sx:{borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':{justifyContent:"start"},..."above"===e?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},children:(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(u.A,{icon:"below"===e?a.FoldDownIcon:a.FoldUpIcon,sx:{mr:2}}),"Show content ",e]})})}function v({children:e}){return(0,r.jsx)(c.l,{children:(0,r.jsxs)(c.l.Group,{children:[(0,r.jsx)(c.l.GroupHeading,{as:"h3",children:"Reference details"}),e]})})}function w({children:e,href:t,icon:n}){return(0,r.jsxs)(c.l.LinkItem,{href:t,children:[(0,r.jsx)(c.l.LeadingVisual,{children:(0,r.jsx)(u.A,{icon:n})}),e]})}function b(){return(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},children:[(0,r.jsx)(d.A,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]})}function j(){return(0,r.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,r.jsx)(i.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})})}function I({children:e,detailsError:t,detailsLoading:n}){return t?(0,r.jsx)(j,{}):n?(0,r.jsx)(b,{}):(0,r.jsx)(r.Fragment,{children:e})}let R={Frame:p,Header:h,Body:I,Content:x,CollapsibleSubsection:g,ContentExpander:y,Details:v,DetailLink:w,SectionDivider:f};try{p.displayName||(p.displayName="Frame")}catch{}try{h.displayName||(h.displayName="Header")}catch{}try{f.displayName||(f.displayName="SectionDivider")}catch{}try{g.displayName||(g.displayName="CollapsibleSubsection")}catch{}try{x.displayName||(x.displayName="Content")}catch{}try{y.displayName||(y.displayName="ContentExpander")}catch{}try{v.displayName||(v.displayName="Details")}catch{}try{w.displayName||(w.displayName="DetailLink")}catch{}try{b.displayName||(b.displayName="Loading")}catch{}try{j.displayName||(j.displayName="Error")}catch{}try{I.displayName||(I.displayName="Body")}catch{}},91295:(e,t,n)=>{n.d(t,{_:()=>d,I:()=>c});var r=n(74848),a=n(75177),i=n(52464),s=n(34614),o=n(16184);let l={"bing-icon":"WebSearchReferencePreview-module__bing-icon--kFZ4I"};function c({reference:e,onDismiss:t}){return(0,r.jsxs)(o.O.Frame,{children:[(0,r.jsx)(o.O.Header,{onDismiss:t,children:(0,r.jsxs)(a.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(d,{}),(0,r.jsxs)(i.A,{sx:{fontSize:0,fontWeight:400,color:"fg.muted"},children:[(0,r.jsxs)(i.A,{sx:{fontSize:1,fontWeight:600,color:"fg.default"},children:[e.results.length," ",1===e.results.length?" result ":" results "]}),"from Bing search."]})]})}),(0,r.jsx)(o.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",px:3,gap:3,pb:3},children:[e.results.map((e,t)=>(0,r.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(s.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(a.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)),(0,r.jsx)(i.A,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(s.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})})]})})]})}let d=()=>(0,r.jsx)("div",{className:l["bing-icon"]});try{c.displayName||(c.displayName="WebSearchReferencePreview")}catch{}try{d.displayName||(d.displayName="BingIcon")}catch{}},44968:(e,t,n)=>{n.d(t,{mo:()=>p,oG:()=>d,yx:()=>u});var r,a=n(74848),i=n(75177),s=n(52464),o=n(99418),l=n(96540);function c(e){if("html"in e&&void 0!==e.html){let{html:t,...n}=e;return{safeHTML:t,props:n}}let{unverifiedHTML:t,unverifiedHTMLConfig:n,...r}=e,a={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{safeHTML:o.default.sanitize(t,a),props:r}}let d=m(i.A);d.displayName="SafeHTMLBox";let u=m(s.A);function m(e){return(0,l.forwardRef)((t,n)=>{let{safeHTML:r,props:i}=c(t);return(0,a.jsx)(e,{ref:n,...i,dangerouslySetInnerHTML:r?{__html:r}:void 0})})}u.displayName="SafeHTMLText";let p=(0,l.forwardRef)((e,t)=>{let{safeHTML:n,props:r}=c(e);return(0,a.jsx)("div",{ref:t,...r,dangerouslySetInnerHTML:n?{__html:n}:void 0})});p.displayName="SafeHTMLDiv";try{(r=SafeHTMLComponent).displayName||(r.displayName="SafeHTMLComponent")}catch{}},61663:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>h,nn:()=>f,lm:()=>m});var r=n(74848),a=n(96540);let i=null,s=null,o=new Set;function l(e){return o.add(e),i||(i=new ResizeObserver(()=>{s||(s=requestAnimationFrame(()=>{for(let e of(s=null,o))e()}))})).observe(document.documentElement),()=>{o.delete(e),0===o.size&&i&&(i.disconnect(),i=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=a.createContext({screenSize:c.small});function m(){return a.useContext(u)}function p(){return f(window.innerWidth)}function h({children:e,initialValue:t=c.small}){let n=(0,a.useSyncExternalStore)(l,p,(0,a.useCallback)(()=>t,[t])),i=(0,a.useMemo)(()=>({screenSize:n}),[n]);return(0,r.jsx)(u.Provider,{value:i,children:e})}function f(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{h.displayName||(h.displayName="ScreenSizeProvider")}catch{}},70642:(e,t,n)=>{n.d(t,{x:()=>m});var r=n(74848),a=n(38621),i=n(75177),s=n(65481),o=n(34614),l=n(89323),c=n(8338),d=n(30729),u=n(47767);function m({portalContainerName:e,protectedOrgs:t,redirectURI:n,isDisplayedInSelectPanel:l,sx:c}){let m=(0,u.zy)();if(!t||0===t.length)return null;let f=(0,r.jsx)("b",{children:t.slice(0,3).join(", ")});return 2===t.length&&(f=(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:t[0]})," and ",(0,r.jsx)("b",{children:t[1]})]})),3===t.length&&(f=(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:t.slice(0,2).join(", ")}),", and ",(0,r.jsx)("b",{children:t[2]})]})),(0,r.jsx)(i.A,{sx:c,"data-testid":"sso-banner",children:(0,r.jsx)(i.A,{sx:{fontSize:1},children:(0,r.jsx)("section",{"aria-label":"Single sign on information",children:(0,r.jsx)(s.A,{sx:{p:3,borderRadius:l?0:2,borderWidth:l?"1px 0":1,borderStyle:"solid",borderColor:"accent.muted",fontSize:1},children:1===t.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(d.A,{icon:a.ShieldLockIcon}),(0,r.jsx)(o.A,{inline:!0,href:`/orgs/${t[0]}/sso?return_to=${h({location:m,redirectURI:n})}`,children:"Single sign-on"}),"\xa0to see results in the ",(0,r.jsx)("b",{children:t[0]})," organization."]}):(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"baseline",gap:2,"& svg":{marginRight:"0 !important"}},children:[(0,r.jsx)(d.A,{sx:{position:"relative",top:"3px"},icon:a.ShieldLockIcon}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"baseline",gap:[0,2],flexWrap:["wrap","nowrap"],flexGrow:1},children:[(0,r.jsxs)(i.A,{as:"p",sx:{marginBottom:0,flexGrow:1},children:["Single sign on to see results in the ",f," ",t.length>3?`and ${t.length-3} other `:"",t.length>1?"organizations":"organization","."]}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(p,{portalContainerName:e,protectedOrgs:t,redirectURI:n})})]})]})})})})})}function p({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,u.zy)();return(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(c.l,{children:t.map(e=>(0,r.jsx)(c.l.Item,{onSelect:()=>window.location.href=`/orgs/${e}/sso?return_to=${h({location:a,redirectURI:n})}`,children:e},`org-${e}`))})})]})}function h({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{m.displayName||(m.displayName="SingleSignOnBanner")}catch{}try{p.displayName||(p.displayName="SingleSignOnButton")}catch{}}}]);
//# sourceMappingURL=ui_packages_copilot-chat_components_ChatInput_tsx-ui_packages_copilot-chat_components_LegalDi-36d9b7-4f37df4c23cf.js.map