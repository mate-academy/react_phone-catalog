"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-code-chat"],{50045:(e,t,n)=>{n.d(t,{I:()=>i});let i=(0,n(96540).createContext)(null)},96558:(e,t,n)=>{n.d(t,{Bc:()=>o,Qs:()=>c,fv:()=>a,uN:()=>r,wJ:()=>s,wX:()=>l,wg:()=>i});let i="copilot-chat-textarea",r="copilot-chat-topic-search",o="Review",a="copilot-chat-header-button",l="copilot-diff-header-button",s="copilot-chat-panel",c="copilot-chat-panel"},91618:(e,t,n)=>{n.d(t,{HS:()=>o,Oc:()=>r,Tv:()=>s,Xr:()=>SymbolChangedEvent,f7:()=>a,fD:()=>l,qR:()=>i});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function i(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function r(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function o(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function a(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function l(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function s(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},77342:(e,t,n)=>{n.d(t,{C6:()=>r,Wp:()=>s,hs:()=>a,mF:()=>l,wh:()=>i,xP:()=>o});let i={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent"},r=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],o=["bing-search","codesearch","semanticsearch","lexical-code-search","kb-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert","planskill","get-github-data","support-search","get-figma","codesearchagentskill"],a={Experiments:"experiements",Prompt:"prompt",None:"none"},l={Unlicensed:"unlicensed",LicensedFull:"licensed_full",LicensedLimited:"licensed_limited"},s="NULL_MESSAGE"},61720:(e,t,n)=>{n.d(t,{o:()=>DiffSelectionEvent});let DiffSelectionEvent=class DiffSelectionEvent extends Event{static dispatch(){window.dispatchEvent(new DiffSelectionEvent)}constructor(){super(DiffSelectionEvent.NAME,{bubbles:!1,cancelable:!0})}};!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(DiffSelectionEvent,"NAME","diff-line-selection")},11234:(e,t,n)=>{var i=n(39595);function r(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function o(e,t){var n=r(e,t,"get");return n.get?n.get.call(e):n.value}function a(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function l(e,t,n){var i=r(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}var d=new WeakMap,u=new WeakMap,f=new WeakMap;let p=class CopilotDiffEntryStore extends EventTarget{get entries(){return o(this,d)}clear(){l(this,d,new Set)}connect(e){o(this,f).observe(e)}disconnect(e){o(this,f).unobserve(e)}constructor(...e){super(...e),a(this,f,{get:h,set:void 0}),a(this,d,{writable:!0,value:new Set}),a(this,u,{writable:!0,value:void 0})}};function h(){return l(this,u,o(this,u)??new IntersectionObserver(e=>{let t=new Set(o(this,d)),n=!1;for(let i of e){let e=i.target;i.isIntersecting&&!t.has(e)?(t.add(e),n=!0):!i.isIntersecting&&t.has(e)&&(t.delete(e),n=!0)}if(n){for(let e of t)document.contains(e)||t.delete(e);l(this,d,t),this.dispatchEvent(new Event("update"))}},{rootMargin:"50%"}))}let CopilotDiffEntryElement=class CopilotDiffEntryElement extends HTMLElement{connectedCallback(){this.menuItemsSlot?.replaceChildren(),CopilotDiffEntryElement.store.connect(this)}disconnectedCallback(){CopilotDiffEntryElement.store.disconnect(this)}constructor(...e){super(...e),s(this,"filePath",""),s(this,"disabled",!1)}};s(CopilotDiffEntryElement,"store",new p),c([i.CF],CopilotDiffEntryElement.prototype,"filePath",void 0),c([i.CF],CopilotDiffEntryElement.prototype,"disabled",void 0),c([i.aC],CopilotDiffEntryElement.prototype,"menuItemsSlot",void 0),CopilotDiffEntryElement=c([i.p_],CopilotDiffEntryElement);var m=n(74848),y=n(12152),b=n(11110),g=n(96540),w=n(91618),E=n(77342),x=n(46988),C=n(38621),j=n(55847),N=n(94977);let S={askCopilotButton:"DiffHeaderAskCopilotButton-module__askCopilotButton--XnBQK"};var _=n(96558);let L={id:_.wX,size:"small",leadingVisual:C.CopilotIcon,className:S.askCopilotButton,children:"Ask Copilot",trailingVisual:C.TriangleDownIcon,"aria-controls":_.wJ,"aria-expanded":!1};function D(){return(0,m.jsx)(N.A,{"aria-label":"Copilot is not available for this pull request",children:(0,m.jsx)(j.Q,{...L,disabled:!0})})}let R=(0,g.memo)(function(){return(0,m.jsx)(N.A,{"aria-label":"Copilot failed to load",children:(0,m.jsx)(j.Q,{...L,disabled:!0})})}),k=(0,g.memo)(function(){return(0,m.jsx)(N.A,{"aria-label":"Loading Copilot features\u2026",children:(0,m.jsx)(j.Q,{...L,disabled:!0})})});try{D.displayName||(D.displayName="UnavailableAskCopilotButton")}catch{}try{R.displayName||(R.displayName="ErrorAskCopilotButton")}catch{}try{k.displayName||(k.displayName="LoadingAskCopilotButton")}catch{}var A=n(61597),I=n(8338);let T=({entry:e,selected:t,onSelect:n,onDeselect:i})=>e.reference?(0,m.jsx)(I.l.Item,{disabled:!e.reference,selected:t,onSelect:()=>t?i():n(e.reference),children:e.path}):(0,m.jsx)(I.l.Item,{disabled:!e.reference,inactiveText:"Copilot is not available for this file",children:e.path}),O=({diffEntries:e,emptyState:t,filter:n,onSelectedReferencesChange:i,selectedReferences:r})=>{let o=(0,g.useMemo)(()=>{let t=n.toLowerCase(),i=[];for(let n of e??[])n.path.toLowerCase().includes(t)&&i.push(n);return i},[e,n]),a=(e,t)=>i(function(e,[t,n]){let i=new Map(e);return i.set(t,n),i}(r,[e,t])),l=e=>i(function(e,t){let n=new Map(e);return n.delete(t),n}(r,e));return 0===o.length?t:(0,m.jsx)(I.l,{children:o.map(e=>(0,m.jsx)(T,{entry:e,selected:r.has(e.path),onSelect:t=>a(e.path,t),onDeselect:()=>l(e.path)},e.path))})};try{T.displayName||(T.displayName="EntryItem")}catch{}try{O.displayName||(O.displayName="DiffEntriesList")}catch{}let P=(0,g.memo)(function({anchorProps:e,diffEntries:t,onSubmit:n}){let[i,r]=(0,g.useState)(""),[o,a]=(0,g.useState)(()=>new Map),l=(0,g.useRef)(null),s=(0,g.useRef)(null);return(0,g.useEffect)(function(){let e=l.current,t=s.current?.getBoundingClientRect(),n=e?.querySelector("dialog");t&&n&&(n.style.left="auto",n.style.right=`${document.body.clientWidth-t.right}px`)}),(0,g.useEffect)(function(){let e=l.current?.querySelector('dialog button[type="submit"]');e&&(e.textContent="Start chat")}),(0,m.jsx)("div",{ref:l,children:(0,m.jsxs)(A.X,{title:"Select files to discuss",onSubmit:()=>n(Array.from(o.values())),anchorRef:s,children:[(0,m.jsx)(A.X.Button,{...e}),(0,m.jsx)(A.X.Header,{children:(0,m.jsx)(A.X.SearchInput,{onChange:e=>r(e.target.value)})}),(0,m.jsx)(O,{diffEntries:t,filter:i,selectedReferences:o,onSelectedReferencesChange:a,emptyState:(0,m.jsx)(A.X.Message,{variant:"empty",title:"No files found",children:"Try a different search term"})}),(0,m.jsx)(A.X.Footer,{})]})})});try{P.displayName||(P.displayName="AskCopilotDiffEntriesSelectPanel")}catch{}let M={id:_.wX,size:"small",leadingVisual:C.CopilotIcon,children:"Ask Copilot",trailingVisual:C.TriangleDownIcon,className:S.askCopilotButton,"aria-controls":_.wJ,"aria-expanded":!1},$=e=>{(0,w.qR)({id:_.wX,intent:E.wh.conversation,references:e}),(0,x.BI)("copilot.file-diff-header.discuss")},B=(0,g.memo)(function({entriesData:e}){return 0===e.length?(0,m.jsx)(D,{}):1===e.length?(0,m.jsx)(q,{diffEntry:e[0],onSubmit:$}):(0,m.jsx)(P,{diffEntries:e,anchorProps:M,onSubmit:$})}),q=({diffEntry:e,onSubmit:t})=>e?.reference===void 0?(0,m.jsx)(D,{}):(0,m.jsx)(j.Q,{...M,onClick:()=>t([e.reference]),trailingVisual:null});try{B.displayName||(B.displayName="DiffHeaderAskCopilotButton")}catch{}try{q.displayName||(q.displayName="SingleFileAskCopilotButton")}catch{}var F=n(40961),W=n(91321),H=n(89323),U=n(87330),X=n(34164),V=n(18447);let G="diff-lines-copilot-button",Q=({fileDiffReference:e,afterSelect:t})=>(0,m.jsx)(V.c,{referenceType:e.type,onClick:()=>{(0,w.qR)({intent:E.wh.conversation,references:[e],id:G}),(0,x.BI)("copilot.file-diff.discuss"),t?.()},id:G});try{Q.displayName||(Q.displayName="DiffLinesAskCopilotButton")}catch{}let J={square:"DiffLinesMenu-module__square--wor4Z","diff-button":"DiffLinesMenu-module__diff-button--QKR13","diff-button-container":"DiffLinesMenu-module__diff-button-container--UrMbh"};var K=n(5993),z=n(35149);let Z=({fileDiffReference:e,onOpenChange:t})=>{let[n,i]=(0,g.useState)(!1),r=e=>{i(e),t?.(e)},o=(0,g.useRef)(null),a=()=>r(!1);return(0,m.jsxs)(W.A,{className:J["diff-button-container"],children:[(0,m.jsx)(Q,{fileDiffReference:e,afterSelect:a}),(0,m.jsxs)(H.W,{open:n,onOpenChange:r,anchorRef:o,children:[(0,m.jsx)(H.W.Anchor,{children:(0,m.jsx)(U.K,{icon:C.TriangleDownIcon,"aria-label":"Copilot menu",ref:o,onSelect:()=>r(!0),size:"small",className:(0,X.$)(J.square,J["diff-button"]),"data-testid":"more-copilot-button"})}),(0,m.jsx)(H.W.Overlay,{align:"end",children:(0,m.jsxs)(I.l,{children:[(0,m.jsx)(K.e,{fileDiffReference:e,afterSelect:a}),(0,m.jsx)(I.l.Divider,{}),(0,m.jsx)(z.i,{fileDiffReference:e,afterSelect:a})]})})]})]})};try{Z.displayName||(Z.displayName="DiffLinesMenu")}catch{}var Y=n(29063);function ee(e,t=Element){let n=(0,g.useRef)(void 0);return(0,g.useSyncExternalStore)(e=>{let t=new MutationObserver(()=>e());return t.observe(document.body,{subtree:!0,childList:!0}),()=>t.disconnect()},()=>{var i;let r=Array.from(document.querySelectorAll(e)).filter(e=>e instanceof t);return n.current&&(i=n.current).length===r.length&&i.every((e,t)=>e===r[t])?n.current:n.current=r})}var et=n(61720);let en=e=>(window.addEventListener("focus",e,{capture:!0}),window.addEventListener("blur",e),window.addEventListener("click",e),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("blur",e),window.removeEventListener("click",e)}),ei=e=>(0,g.useSyncExternalStore)(en,()=>e?.contains(document.activeElement)),er=()=>{let e=(0,g.useSyncExternalStore)(e=>(window.addEventListener(et.o.NAME,e),()=>window.removeEventListener(et.o.NAME,e)),()=>window.location.hash),t=(0,Y.ZD)(e);if(!t)return null;let n=document.querySelector(".selected-line.selected-line-top.blob-code:not(.js-skip-tagsearch)"),i=document.querySelector(".selected-line.selected-line-top.blob-code.js-skip-tagsearch"),r=n??i;return r?{...t,topRightElement:r}:null},eo=()=>{let[e,t]=(0,g.useState)(),n=ee("td.blob-code:not(.blob-code-empty)",HTMLTableCellElement);if((0,g.useEffect)(()=>{function e(){t(this)}function i(){t(void 0)}for(let t of n)t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",i);return()=>{for(let t of n)t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",i)}},[n]),!e)return null;let[i,r]=e?.parentElement?.querySelectorAll("td.blob-num")??[],o=i?.id||r?.id||void 0,a=o?(0,Y.ZD)(o):void 0;return a?{...a,topRightElement:e}:null},ea=()=>{let e=ee("td.blob-code:not(.blob-code-empty)",HTMLTableCellElement),[t,n]=(0,g.useState)();(0,g.useEffect)(()=>{function t(){n(this)}for(let n of e)n.addEventListener("focusin",t);return()=>{for(let n of e)n.removeEventListener("focusin",t)}},[e]);let i=ei(t);if((0,g.useEffect)(()=>{i||n(void 0)},[i]),!t)return null;let[r,o]=t?.parentElement?.querySelectorAll("td.blob-num")??[],a=r?.id||o?.id||void 0,l=a?(0,Y.ZD)(a):void 0;return l?{...l,topRightElement:t}:null},el=()=>{let e=new Map,t=eo();t&&e.set(t.diffAnchor,t);let n=er();n&&e.set(n.diffAnchor,n);let i=ea();return i&&e.set(i.diffAnchor,i),e};var es=n(67136);let ec=({fileDiffReference:e})=>{let{addToast:t}=(0,es.Y6)();return void 0===e?(0,m.jsx)(ed,{inactiveText:"Copilot is not available for this file type"}):(0,m.jsx)(ed,{handleAttach:()=>{(0,w.Oc)(e),t({message:"Reference added to thread",type:"success"}),(0,x.BI)("copilot.file-diff.menu.add")},handleDiscuss:()=>{(0,w.qR)({intent:E.wh.conversation,references:[e]}),(0,x.BI)("copilot.file-diff.menu.discuss")}})},ed=({handleDiscuss:e,handleAttach:t,inactiveText:n})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eu,{text:"Ask Copilot about this diff",onClick:e,inactiveText:n}),(0,m.jsx)(eu,{text:"Attach to current thread",onClick:t,inactiveText:n})]});function eu({onClick:e,inactiveText:t,text:n}){return t?(0,m.jsx)("button",{type:"button",disabled:!0,role:"menuitem",className:"px-5 dropdown-item btn-link","aria-label":t,children:n}):(0,m.jsx)("button",{type:"button",role:"menuitem",className:"px-5 dropdown-item btn-link",onClick:e,children:n})}try{ec.displayName||(ec.displayName="DiffEntryMenuItems")}catch{}try{ed.displayName||(ed.displayName="BuildMenu")}catch{}try{eu.displayName||(eu.displayName="BuildItemForRailsMenu")}catch{}let ef=()=>(0,g.useSyncExternalStore)(e=>(CopilotDiffEntryElement.store.addEventListener("update",e),()=>CopilotDiffEntryElement.store.removeEventListener("update",e)),()=>CopilotDiffEntryElement.store.entries),ep=({fileDiffReference:e,activeLines:t})=>{let[n,i]=(0,g.useState)(!1),r=(0,g.useRef)(t),o=n?r.current:t;if(r.current=o,!o)return null;let a={...e,selectedRange:{start:`${o.startOrientation[0]?.toUpperCase()??""}${o.startLineNumber}`,end:`${o.endOrientation[0]?.toUpperCase()??""}${o.endLineNumber}`}};return(0,F.createPortal)((0,m.jsx)(Z,{fileDiffReference:a,onOpenChange:i}),o.topRightElement)},eh=({entryElement:{menuItemsSlot:e},fileDiffReference:t,activeLines:n})=>(0,m.jsxs)(m.Fragment,{children:[t&&(0,m.jsx)(ep,{fileDiffReference:t,activeLines:n}),e&&(0,F.createPortal)((0,m.jsx)(ec,{fileDiffReference:t}),e)]}),em=({entriesData:e})=>{let t=ef(),n=el();return(0,g.useMemo)(()=>{let i=[],r=e.reduce((e,t)=>(t.reference&&e.set(t.path,t.reference),e),new Map);return Array.from(t).map(e=>{let t=r.get(e.filePath);t&&i.push((0,m.jsx)(eh,{entryElement:e,fileDiffReference:t,activeLines:n.get(t.id)},e.filePath))}),i},[n,e,t])};try{ep.displayName||(ep.displayName="InjectedDiffButton")}catch{}try{eh.displayName||(eh.displayName="InjectedDiffEntry")}catch{}try{em.displayName||(em.displayName="InjectedDiffEntries")}catch{}var ev=n(5796),ey=n(84100),eb=n(57572);let GetDiffEntryDataForbiddenError=class GetDiffEntryDataForbiddenError extends Error{constructor(...e){super(...e),this.name="GetDiffEntryDataForbiddenError"}};let eg=e=>{let[t,n]=(0,g.useState)(!0),[i,r]=(0,g.useState)(),[o,a]=(0,g.useState)([]),l=(0,ey.U)(async(e,t)=>{n(!0),r(void 0);try{let n=await (0,eb.DI)(e);if(403===n.status)throw new GetDiffEntryDataForbiddenError;if(!n.ok)throw Error(`Request failed: ${n.status}`);let i=await n.json();if(t){let e=(i=[]).find(e=>e.path===t);e&&i.push(e)}a(i)}catch(e){r(e instanceof Error?e:Error("unknown error"))}n(!1)});return(0,g.useEffect)(()=>{l((0,ev.Ti7)(e),e.filePath)},[e,l]),{entriesData:o,loading:t,error:i}},ew=e=>{let{entriesData:t,loading:n,error:i}=eg(e);return i instanceof GetDiffEntryDataForbiddenError?null:i?(0,m.jsx)(R,{}):n?(0,m.jsx)(k,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(B,{entriesData:t}),(0,m.jsx)(em,{entriesData:t})]})};(0,b.k)("copilot-code-chat",{Component:e=>((0,g.useEffect)(()=>{document.querySelector("diff-layout")?.classList.add("copilot-chat-enabled")},[]),(0,m.jsx)(y.t,{fallback:(0,m.jsx)(R,{}),children:(0,m.jsx)(ew,{...e})}))})},29063:(e,t,n)=>{n.d(t,{Dd:()=>l,EW:()=>r,N0:()=>s,ZD:()=>c,i8:()=>d,j$:()=>u,pd:()=>a});var i=n(4460);function r(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}function o(e,t){return`${"left"===t?"L":"R"}${e}`}function a(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function l(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function s(e){let t=e.match(/^#annotation_(\d+)/),n=t?.[1];return n?parseInt(n):void 0}function c(e){let t=r(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function d(e){!function(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;(0,i.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}(u(e))}function u(e){let t=o(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=o(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}},4460:(e,t,n)=>{n.d(t,{C3:()=>l,JV:()=>r,K3:()=>u,MM:()=>s,OE:()=>f,Zu:()=>d,bj:()=>o,jc:()=>c,kd:()=>a});var i=n(47584);function r(){return i.Kn?.state||{}}function o(e){p(r(),"",e)}function a(e){i.Kn?.pushState({appId:r().appId},"",e),h()}function l(e){p({...r(),...e},"",location.href)}function s(e){o(`?${e.toString()}${i.fV.hash}`)}function c(){o(i.fV.pathname+i.fV.hash)}function d(e){o(e.startsWith("#")?e:`#${e}`)}function u(){o(i.fV.pathname+i.fV.search)}function f(){i.Kn?.back()}function p(e,t,n){i.Kn?.replaceState(e,t,n),h()}function h(){i.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},46988:(e,t,n)=>{let i;n.d(t,{BI:()=>p,Ti:()=>h,lA:()=>f});var r=n(70837),o=n(18679),a=n(80688),l=n(57516);let{getItem:s}=(0,a.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,r.O)("octolytics");delete e.baseContext,i=new o.s(e)}catch{}function u(e){let t=(0,r.O)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");for(let[e,i]of(n&&Object.assign(t,JSON.parse(atob(n.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=i);return t.staff=(0,l.X)().toString(),Object.assign(t,e)}function f(e){i?.sendPageView(u(e))}function p(e,t={}){let n=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,r=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(r[e]=`${n}`);i&&(u(r),i.sendEvent(e||"unknown",u(r)))}function h(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},73218:(e,t,n)=>{n.d(t,{l:()=>i});let i=()=>void 0},64128:(e,t,n)=>{n.d(t,{Y:()=>i});function i(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},74753:(e,t,n)=>{n.d(t,{A:()=>l});let{getItem:i,setItem:r,removeItem:o}=(0,n(80688).A)("localStorage"),a="REACT_PROFILING_ENABLED",l={enable:()=>r(a,"true"),disable:()=>o(a),isEnabled:()=>!!i(a)}},45996:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(38568),r=n(96540);function o(){let e=(0,r.useRef)(!1),t=(0,r.useCallback)(()=>e.current,[]);return(0,i.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},38568:(e,t,n)=>{n.d(t,{N:()=>o});var i=n(47584),r=n(96540);let o=void 0!==i.cg?.document?.createElement?r.useLayoutEffect:r.useEffect},84100:(e,t,n)=>{n.d(t,{U:()=>a,g:()=>o});var i=n(38568),r=n(96540);let o=Symbol("callbackCancelledResult"),a=(e,t=!1)=>{let n=(0,r.useRef)(e);(0,i.N)(()=>{n.current=e},[e]);let a=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(a.current=!0,()=>{t||(a.current=!1)}),[t]),(0,r.useCallback)((...e)=>a.current?n.current(...e):o,[])}},82060:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(45996),r=n(96540);let o=function(e){let t=(0,i.A)(),[n,o]=(0,r.useState)(e);return[n,(0,r.useCallback)(e=>{t()&&o(e)},[t])]}},57572:(e,t,n)=>{function i(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let n=function(e){let t=new URL(e,window.location.href),n=new URL(window.location.href,window.location.origin),i=n.searchParams.get("_features");i&&!t.searchParams.has("_features")&&t.searchParams.set("_features",i);let r=n.searchParams.get("_tracing");return r&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",r),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(n,{...t,headers:r})}function r(e,t){let n={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},r=t?.body?JSON.stringify(t.body):void 0;return i(e,{...t,body:r,headers:n})}function o(e,t={}){let n={...t.headers,"GitHub-Is-React":"true"};return i(e,{...t,headers:n})}function a(e,t){let n={...t?.headers??{},"GitHub-Is-React":"true"};return r(e,{...t,headers:n})}n.d(t,{DI:()=>i,QJ:()=>o,Sr:()=>a,lS:()=>r})},59418:(e,t,n)=>{n.d(t,{y:()=>a});var i=n(74848),r=n(21728),o=n(50045);function a(e){let t,n,a;let l=(0,r.c)(7),{children:s,appName:c,category:d,metadata:u}=e;return l[0]!==c||l[1]!==d||l[2]!==u?(n={appName:c,category:d,metadata:u},l[0]=c,l[1]=d,l[2]=u,l[3]=n):n=l[3],t=n,l[4]!==s||l[5]!==t?(a=(0,i.jsx)(o.I.Provider,{value:t,children:s}),l[4]=s,l[5]=t,l[6]=a):a=l[6],a}try{a.displayName||(a.displayName="AnalyticsProvider")}catch{}},18447:(e,t,n)=>{n.d(t,{c:()=>c});var i=n(74848),r=n(38621),o=n(87330),a=n(34164),l=n(96540);let s={square:"AskCopilotButton-module__square--o8kDO",muted:"AskCopilotButton-module__muted--QatcG"};function c({children:e,referenceType:t,...n}){let c=(0,l.useRef)(null);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.K,{className:(0,a.$)(s.square,!!e&&s.muted),ref:c,icon:r.CopilotIcon,size:"small","aria-label":`Ask Copilot about this ${t}`,"data-testid":"copilot-ask-menu",...n})})}try{c.displayName||(c.displayName="AskCopilotButton")}catch{}},35149:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(74848),r=n(91618),o=n(46988),a=n(67136),l=n(8338);let s=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:s}=(0,a.Y6)();return(0,i.jsx)(l.l.Item,{onSelect:()=>{(0,r.Oc)(e),s({message:"Reference added to thread",type:"success"}),(0,o.BI)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{s.displayName||(s.displayName="DiffLinesAttachMenuItem")}catch{}},5993:(e,t,n)=>{n.d(t,{e:()=>s});var i=n(74848),r=n(91618),o=n(77342),a=n(46988),l=n(8338);let s=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(l.l.Item,{onSelect:()=>{(0,r.qR)({content:"Explain",intent:o.wh.explainFileDiff,references:[e]}),(0,a.BI)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{s.displayName||(s.displayName="DiffLinesExplainMenuItem")}catch{}},18347:(e,t,n)=>{n.d(t,{BP:()=>u,D3:()=>d,O8:()=>s});var i=n(74848),r=n(21728),o=n(96540),a=n(47584),l=n(38568);let s={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,o.createContext)(s.ClientRender);function d(e){let t,n,d,u;let f=(0,r.c)(8),{wasServerRendered:p,children:h}=e;f[0]!==p?(t=()=>a.X3?s.ServerRender:p?s.ClientHydrate:s.ClientRender,f[0]=p,f[1]=t):t=f[1];let[m,y]=(0,o.useState)(t);return f[2]!==m?(n=()=>{m!==s.ClientRender&&y(s.ClientRender)},d=[m],f[2]=m,f[3]=n,f[4]=d):(n=f[3],d=f[4]),(0,l.N)(n,d),f[5]!==h||f[6]!==m?(u=(0,i.jsx)(c.Provider,{value:m,children:h}),f[5]=h,f[6]=m,f[7]=u):u=f[7],u}function u(){return(0,o.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},67136:(e,t,n)=>{n.d(t,{Qn:()=>s,T8:()=>d,Y6:()=>f,k6:()=>u});var i=n(74848),r=n(65556),o=n(96540),a=n(73218),l=n(82060);let s=5e3,c=(0,o.createContext)({addToast:a.l,addPersistedToast:a.l,clearPersistedToast:a.l}),d=(0,o.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,l.A)([]),[a,u]=(0,o.useState)(null),{safeSetTimeout:f}=(0,r.A)(),p=(0,o.useCallback)(function(e){n([...t,e]),f(()=>n(t.slice(1)),s)},[t,f,n]),h=(0,o.useCallback)(function(e){u(e)},[u]),m=(0,o.useCallback)(function(){u(null)},[u]),y=(0,o.useMemo)(()=>({addToast:p,addPersistedToast:h,clearPersistedToast:m}),[h,p,m]),b=(0,o.useMemo)(()=>({toasts:t,persistedToast:a}),[t,a]);return(0,i.jsx)(c.Provider,{value:y,children:(0,i.jsx)(d.Provider,{value:b,children:e})})}function f(){return(0,o.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},91958:(e,t,n)=>{n.d(t,{V:()=>f});var i=n(74848),r=n(96540),o=n(67136),a=n(38621),l=n(65556),s=n(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,i.jsx)(a.InfoIcon,{}),success:(0,i.jsx)(a.CheckIcon,{}),error:(0,i.jsx)(a.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:o="info",role:a="log"})=>{let[u,f]=r.useState(!0),{safeSetTimeout:p}=(0,l.A)();return(0,r.useEffect)(()=>{t&&p(()=>f(!1),t-300)},[p,t]),(0,i.jsx)(s.Z,{children:(0,i.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,i.jsxs)("div",{className:`Toast ${c[o]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${o}`,role:a,children:[(0,i.jsx)("span",{className:"Toast-icon",children:n||d[o]}),(0,i.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function f(){let{toasts:e,persistedToast:t}=(0,r.useContext)(o.T8);return(0,i.jsxs)(i.Fragment,{children:[e.map((e,t)=>(0,i.jsx)(u,{message:e.message,icon:e.icon,timeToLive:o.Qn,type:e.type,role:e.role},t)),t&&(0,i.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{f.displayName||(f.displayName="Toasts")}catch{}},18679:(e,t,n)=>{n.d(t,{s:()=>AnalyticsClient});let i=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];var r=n(36301);let AnalyticsClient=class AnalyticsClient{constructor(e){this.options=e}get collectorUrl(){return this.options.collectorUrl}get clientId(){return this.options.clientId?this.options.clientId:(0,r.y)()}createEvent(e){return{page:location.href,title:document.title,context:{...this.options.baseContext,...function(){let e={};try{for(let[t,n]of new URLSearchParams(window.location.search)){let r=t.toLowerCase();i.includes(r)&&(e[r]=n)}return e}catch(e){return{}}}(),...e}}}sendPageView(e){let t=this.createEvent(e);this.send({page_views:[t]})}sendEvent(e,t){let n={...this.createEvent(t),type:e};this.send({events:[n]})}send({page_views:e,events:t}){let n=JSON.stringify({client_id:this.clientId,page_views:e,events:t,request_context:{referrer:function(){let e;try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(e){}}return""===e&&(e=document.referrer),e}(),user_agent:navigator.userAgent,screen_resolution:function(){try{return`${screen.width}x${screen.height}`}catch(e){return"unknown"}}(),browser_resolution:function(){let e=0,t=0;try{return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):null!=document.documentElement&&null!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):null!=document.body&&null!=document.body.clientWidth&&(t=document.body.clientWidth,e=document.body.clientHeight),`${t}x${e}`}catch(e){return"unknown"}}(),browser_languages:navigator.languages?navigator.languages.join(","):navigator.language||"",pixel_ratio:window.devicePixelRatio,timestamp:Date.now(),tz_seconds:-60*new Date().getTimezoneOffset()}});try{if(navigator.sendBeacon){navigator.sendBeacon(this.collectorUrl,n);return}}catch{}fetch(this.collectorUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:n,keepalive:!1})}}},70837:(e,t,n)=>{n.d(t,{O:()=>i});function i(e="ha"){let t;let n={};for(let i of Array.from(document.head.querySelectorAll(`meta[name^="${e}-"]`))){let{name:r,content:o}=i,a=r.replace(`${e}-`,"").replace(/-/g,"_");"url"===a?t=o:n[a]=o}if(!t)throw Error(`AnalyticsClient ${e}-url meta tag not found`);return{collectorUrl:t,...Object.keys(n).length>0?{baseContext:n}:{}}}},37732:(e,t,n)=>{n.d(t,{a:()=>l});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i=new Set(["children","localName","ref","style","className"]),r=new WeakMap,o=(e,t,n,i,o)=>{let a=null==o?void 0:o[t];void 0===a||n===i?null==n&&t in HTMLElement.prototype?e.removeAttribute(t):e[t]=n:((e,t,n)=>{let i=r.get(e);void 0===i&&r.set(e,i=new Map);let o=i.get(t);void 0!==n?void 0===o?(i.set(t,o={handleEvent:n}),e.addEventListener(t,o)):o.handleEvent=n:void 0!==o&&(i.delete(t),e.removeEventListener(t,o))})(e,a,n)},a=(e,t)=>{"function"==typeof e?e(t):e.current=t};function l(e=window.React,t,n,r,s){let c,d,u;void 0===t?({tagName:d,elementClass:u,events:r,displayName:s}=e,c=e.react):(c=e,u=n,d=t);let f=c.Component,p=c.createElement,h=new Set(Object.keys(null!=r?r:{}));let v=class v extends f{constructor(){super(...arguments),this.o=null}t(e){if(null!==this.o)for(let t in this.i)o(this.o,t,this.props[t],e?e[t]:void 0,r)}componentDidMount(){var e;this.t(),null===(e=this.o)||void 0===e||e.removeAttribute("defer-hydration")}componentDidUpdate(e){this.t(e)}render(){let{_$Gl:e,...t}=this.props;this.h!==e&&(this.u=t=>{null!==e&&a(e,t),this.o=t,this.h=e}),this.i={};let n={ref:this.u};for(let[e,r]of Object.entries(t))i.has(e)?n["className"===e?"class":e]=r:h.has(e)||e in u.prototype?this.i[e]=r:n[e]=r;return n.suppressHydrationWarning=!0,p(d,n)}};v.displayName=null!=s?s:u.name;let m=c.forwardRef((e,t)=>p(v,{...e,_$Gl:t},null==e?void 0:e.children));return m.displayName=v.displayName,m}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-41b1a8","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-e7dcdd","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","ui_packages_failbot_failbot_ts","ui_packages_paths_index_ts"],()=>t(11234)),e.O()}]);
//# sourceMappingURL=copilot-code-chat-46cc67bba97f.js.map