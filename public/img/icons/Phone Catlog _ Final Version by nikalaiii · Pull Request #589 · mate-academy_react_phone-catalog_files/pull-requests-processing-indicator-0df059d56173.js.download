"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["pull-requests-processing-indicator"],{50045:(e,t,n)=>{n.d(t,{I:()=>r});let r=(0,n(96540).createContext)(null)},46988:(e,t,n)=>{let r;n.d(t,{BI:()=>h,Ti:()=>p,lA:()=>m});var a=n(70837),s=n(18679),i=n(80688),o=n(57516);let{getItem:l}=(0,i.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,a.O)("octolytics");delete e.baseContext,r=new s.s(e)}catch{}function u(e){let t=(0,a.O)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");for(let[e,r]of(n&&Object.assign(t,JSON.parse(atob(n.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=r);return t.staff=(0,o.X)().toString(),Object.assign(t,e)}function m(e){r?.sendPageView(u(e))}function h(e,t={}){let n=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,a=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(a[e]=`${n}`);r&&(u(a),r.sendEvent(e||"unknown",u(a)))}function p(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},73218:(e,t,n)=>{n.d(t,{l:()=>r});let r=()=>void 0},64128:(e,t,n)=>{n.d(t,{Y:()=>r});function r(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},62184:(e,t,n)=>{var r=n(11110),a=n(74848),s=n(57572),i=n(75177),o=n(55847),l=n(63867),c=n(52464),d=n(42522),u=n(96540),m=n(70404),h=n(59418),p=n(45996),f=n(38621);let y={stale:!1,latest_unsynced_push_to_head_ref_at:null};function g({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[r,o]=(0,u.useState)(y),l=(0,p.A)(),c=(0,u.useCallback)(async()=>{try{let t=await (0,s.lS)(e);if(t.ok){let e=await t.json();l()&&o(e)}}catch{l()&&o(y)}},[l,e]);(0,u.useEffect)(()=>{c()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:m}=r;return(0,a.jsx)(i.A,{sx:{mt:-2},children:(0,a.jsx)(h.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,a.jsx)(_,{pullRequestId:n,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:m})})})}function _({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:r}){let{sendAnalyticsEvent:s}=(0,m.s)();if(!n||!r)return null;let u=new Date,h=new Date(r),p=Math.round(u.getTime()-h.getTime())/1e3;return p<20||p>=86400?null:(s("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:p}),(0,a.jsx)(d.m,{text:"Recent push is still being processed, and will show up in a bit",direction:"s",children:(0,a.jsx)(o.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",sx:{color:"fg.muted"},trailingVisual:f.LinkExternalIcon,children:(0,a.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",fontWeight:400},children:[(0,a.jsx)(l.A,{size:"small",sx:{color:"fg.muted"}}),(0,a.jsx)(c.A,{sx:{color:"fg.muted",fontSize:0,ml:2},children:"Processing updates"})]})})}))}try{g.displayName||(g.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{_.displayName||(_.displayName="PullRequestsProcessingIndicator")}catch{}(0,r.k)("pull-requests-processing-indicator",{Component:g})},74753:(e,t,n)=>{n.d(t,{A:()=>o});let{getItem:r,setItem:a,removeItem:s}=(0,n(80688).A)("localStorage"),i="REACT_PROFILING_ENABLED",o={enable:()=>a(i,"true"),disable:()=>s(i),isEnabled:()=>!!r(i)}},70404:(e,t,n)=>{n.d(t,{S:()=>l,s:()=>o});var r=n(21728),a=n(96540),s=n(46988),i=n(50045);function o(){let e,t;let n=(0,r.c)(6),o=(0,a.useContext)(i.I);if(!o)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:l,category:c,metadata:d}=o;n[0]!==l||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let r={react:!0,app_name:l,category:c,...d};(0,s.BI)(e,{...r,...void 0===n?{}:n,target:t})},n[0]=l,n[1]=c,n[2]=d,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function l(){let e,t;let n=(0,r.c)(4),{sendAnalyticsEvent:a}=o();n[0]!==a?(e=e=>{a("analytics.click",void 0,void 0===e?{}:e)},n[0]=a,n[1]=e):e=n[1];let s=e;return n[2]!==s?(t={sendClickAnalyticsEvent:s},n[2]=s,n[3]=t):t=n[3],t}},45996:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(38568),a=n(96540);function s(){let e=(0,a.useRef)(!1),t=(0,a.useCallback)(()=>e.current,[]);return(0,r.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},38568:(e,t,n)=>{n.d(t,{N:()=>s});var r=n(47584),a=n(96540);let s=void 0!==r.cg?.document?.createElement?a.useLayoutEffect:a.useEffect},82060:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(45996),a=n(96540);let s=function(e){let t=(0,r.A)(),[n,s]=(0,a.useState)(e);return[n,(0,a.useCallback)(e=>{t()&&s(e)},[t])]}},57572:(e,t,n)=>{function r(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let n=function(e){let t=new URL(e,window.location.href),n=new URL(window.location.href,window.location.origin),r=n.searchParams.get("_features");r&&!t.searchParams.has("_features")&&t.searchParams.set("_features",r);let a=n.searchParams.get("_tracing");return a&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",a),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),a={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(n,{...t,headers:a})}function a(e,t){let n={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return r(e,{...t,body:a,headers:n})}function s(e,t={}){let n={...t.headers,"GitHub-Is-React":"true"};return r(e,{...t,headers:n})}function i(e,t){let n={...t?.headers??{},"GitHub-Is-React":"true"};return a(e,{...t,headers:n})}n.d(t,{DI:()=>r,QJ:()=>s,Sr:()=>i,lS:()=>a})},59418:(e,t,n)=>{n.d(t,{y:()=>i});var r=n(74848),a=n(21728),s=n(50045);function i(e){let t,n,i;let o=(0,a.c)(7),{children:l,appName:c,category:d,metadata:u}=e;return o[0]!==c||o[1]!==d||o[2]!==u?(n={appName:c,category:d,metadata:u},o[0]=c,o[1]=d,o[2]=u,o[3]=n):n=o[3],t=n,o[4]!==l||o[5]!==t?(i=(0,r.jsx)(s.I.Provider,{value:t,children:l}),o[4]=l,o[5]=t,o[6]=i):i=o[6],i}try{i.displayName||(i.displayName="AnalyticsProvider")}catch{}},18347:(e,t,n)=>{n.d(t,{BP:()=>u,D3:()=>d,O8:()=>l});var r=n(74848),a=n(21728),s=n(96540),i=n(47584),o=n(38568);let l={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,s.createContext)(l.ClientRender);function d(e){let t,n,d,u;let m=(0,a.c)(8),{wasServerRendered:h,children:p}=e;m[0]!==h?(t=()=>i.X3?l.ServerRender:h?l.ClientHydrate:l.ClientRender,m[0]=h,m[1]=t):t=m[1];let[f,y]=(0,s.useState)(t);return m[2]!==f?(n=()=>{f!==l.ClientRender&&y(l.ClientRender)},d=[f],m[2]=f,m[3]=n,m[4]=d):(n=m[3],d=m[4]),(0,o.N)(n,d),m[5]!==p||m[6]!==f?(u=(0,r.jsx)(c.Provider,{value:f,children:p}),m[5]=p,m[6]=f,m[7]=u):u=m[7],u}function u(){return(0,s.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},67136:(e,t,n)=>{n.d(t,{Qn:()=>l,T8:()=>d,Y6:()=>m,k6:()=>u});var r=n(74848),a=n(65556),s=n(96540),i=n(73218),o=n(82060);let l=5e3,c=(0,s.createContext)({addToast:i.l,addPersistedToast:i.l,clearPersistedToast:i.l}),d=(0,s.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,o.A)([]),[i,u]=(0,s.useState)(null),{safeSetTimeout:m}=(0,a.A)(),h=(0,s.useCallback)(function(e){n([...t,e]),m(()=>n(t.slice(1)),l)},[t,m,n]),p=(0,s.useCallback)(function(e){u(e)},[u]),f=(0,s.useCallback)(function(){u(null)},[u]),y=(0,s.useMemo)(()=>({addToast:h,addPersistedToast:p,clearPersistedToast:f}),[p,h,f]),g=(0,s.useMemo)(()=>({toasts:t,persistedToast:i}),[t,i]);return(0,r.jsx)(c.Provider,{value:y,children:(0,r.jsx)(d.Provider,{value:g,children:e})})}function m(){return(0,s.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},91958:(e,t,n)=>{n.d(t,{V:()=>m});var r=n(74848),a=n(96540),s=n(67136),i=n(38621),o=n(65556),l=n(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,r.jsx)(i.InfoIcon,{}),success:(0,r.jsx)(i.CheckIcon,{}),error:(0,r.jsx)(i.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:s="info",role:i="log"})=>{let[u,m]=a.useState(!0),{safeSetTimeout:h}=(0,o.A)();return(0,a.useEffect)(()=>{t&&h(()=>m(!1),t-300)},[h,t]),(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,r.jsxs)("div",{className:`Toast ${c[s]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${s}`,role:i,children:[(0,r.jsx)("span",{className:"Toast-icon",children:n||d[s]}),(0,r.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,a.useContext)(s.T8);return(0,r.jsxs)(r.Fragment,{children:[e.map((e,t)=>(0,r.jsx)(u,{message:e.message,icon:e.icon,timeToLive:s.Qn,type:e.type,role:e.role},t)),t&&(0,r.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},18679:(e,t,n)=>{n.d(t,{s:()=>AnalyticsClient});let r=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];var a=n(36301);let AnalyticsClient=class AnalyticsClient{constructor(e){this.options=e}get collectorUrl(){return this.options.collectorUrl}get clientId(){return this.options.clientId?this.options.clientId:(0,a.y)()}createEvent(e){return{page:location.href,title:document.title,context:{...this.options.baseContext,...function(){let e={};try{for(let[t,n]of new URLSearchParams(window.location.search)){let a=t.toLowerCase();r.includes(a)&&(e[a]=n)}return e}catch(e){return{}}}(),...e}}}sendPageView(e){let t=this.createEvent(e);this.send({page_views:[t]})}sendEvent(e,t){let n={...this.createEvent(t),type:e};this.send({events:[n]})}send({page_views:e,events:t}){let n=JSON.stringify({client_id:this.clientId,page_views:e,events:t,request_context:{referrer:function(){let e;try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(e){}}return""===e&&(e=document.referrer),e}(),user_agent:navigator.userAgent,screen_resolution:function(){try{return`${screen.width}x${screen.height}`}catch(e){return"unknown"}}(),browser_resolution:function(){let e=0,t=0;try{return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):null!=document.documentElement&&null!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):null!=document.body&&null!=document.body.clientWidth&&(t=document.body.clientWidth,e=document.body.clientHeight),`${t}x${e}`}catch(e){return"unknown"}}(),browser_languages:navigator.languages?navigator.languages.join(","):navigator.language||"",pixel_ratio:window.devicePixelRatio,timestamp:Date.now(),tz_seconds:-60*new Date().getTimezoneOffset()}});try{if(navigator.sendBeacon){navigator.sendBeacon(this.collectorUrl,n);return}}catch{}fetch(this.collectorUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:n,keepalive:!1})}}},70837:(e,t,n)=>{n.d(t,{O:()=>r});function r(e="ha"){let t;let n={};for(let r of Array.from(document.head.querySelectorAll(`meta[name^="${e}-"]`))){let{name:a,content:s}=r,i=a.replace(`${e}-`,"").replace(/-/g,"_");"url"===i?t=s:n[i]=s}if(!t)throw Error(`AnalyticsClient ${e}-url meta tag not found`);return{collectorUrl:t,...Object.keys(n).length>0?{baseContext:n}:{}}}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-41b1a8","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-e7dcdd","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","ui_packages_failbot_failbot_ts"],()=>t(62184)),e.O()}]);
//# sourceMappingURL=pull-requests-processing-indicator-13a8daa0cb0c.js.map