{"ast":null,"code":"import{useSearchParams}from'react-router-dom';import{useMemo}from'react';import ProductCard from'../components/ProductCard';import'./Catalog.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SORT_OPTIONS={age:'Newest',title:'Alphabetically',price:'Cheapest'};const PER_PAGE_OPTIONS=[4,8,16,'all'];function Catalog(_ref){let{products,cart,favorites,addToCart,addToFavorites}=_ref;const[searchParams,setSearchParams]=useSearchParams();const sort=searchParams.get('sort')||'age';const page=Number(searchParams.get('page')||1);const perPage=searchParams.get('perPage')||'all';const sortedProducts=useMemo(()=>{const prepared=[...products];switch(sort){case'title':return prepared.sort((a,b)=>a.name.localeCompare(b.name));case'price':return prepared.sort((a,b)=>a.priceDiscount-b.priceDiscount);case'age':default:return prepared.sort((a,b)=>b.year-a.year);}},[products,sort]);const visibleProducts=useMemo(()=>{if(perPage==='all'){return sortedProducts;}const start=(page-1)*perPage;const end=start+Number(perPage);return sortedProducts.slice(start,end);},[sortedProducts,page,perPage]);const totalPages=perPage==='all'?1:Math.ceil(sortedProducts.length/perPage);const handleSortChange=e=>{setSearchParams({sort:e.target.value});};const handlePerPageChange=e=>{const value=e.target.value;if(value==='all'){setSearchParams({sort});}else{setSearchParams({sort,perPage:value,page:'1'});}};const handlePageChange=newPage=>{setSearchParams({sort,perPage,page:String(newPage)});};if(!products.length){return/*#__PURE__*/_jsx(\"h2\",{children:\"There are no products yet\"});}return/*#__PURE__*/_jsxs(\"section\",{className:\"catalog\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"catalog-title\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"catalog-controls\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Sort by:\",' ',/*#__PURE__*/_jsx(\"select\",{value:sort,onChange:handleSortChange,children:Object.entries(SORT_OPTIONS).map(_ref2=>{let[key,label]=_ref2;return/*#__PURE__*/_jsx(\"option\",{value:key,children:label},key);})})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Items on page:\",' ',/*#__PURE__*/_jsx(\"select\",{value:perPage,onChange:handlePerPageChange,children:PER_PAGE_OPTIONS.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"catalog-grid\",children:visibleProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,cart:cart,favorites:favorites,addToCart:addToCart,addToFavorites:addToFavorites},product.id||product.itemId))}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"catalog-pagination\",children:Array.from({length:totalPages}).map((_,i)=>i+1).map(p=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(p),disabled:p===page,children:p},p))})]});}export default Catalog;","map":{"version":3,"names":["useSearchParams","useMemo","ProductCard","jsx","_jsx","jsxs","_jsxs","SORT_OPTIONS","age","title","price","PER_PAGE_OPTIONS","Catalog","_ref","products","cart","favorites","addToCart","addToFavorites","searchParams","setSearchParams","sort","get","page","Number","perPage","sortedProducts","prepared","a","b","name","localeCompare","priceDiscount","year","visibleProducts","start","end","slice","totalPages","Math","ceil","length","handleSortChange","e","target","value","handlePerPageChange","handlePageChange","newPage","String","children","className","onChange","Object","entries","map","_ref2","key","label","option","product","id","itemId","Array","from","_","i","p","onClick","disabled"],"sources":["C:/Users/Admin/Desktop/projects/react-phone-catalog/src/pages/Catalog.js"],"sourcesContent":["import { useSearchParams } from 'react-router-dom';\r\nimport { useMemo } from 'react';\r\nimport ProductCard from '../components/ProductCard';\r\nimport './Catalog.css';\r\n\r\nconst SORT_OPTIONS = {\r\n  age: 'Newest',\r\n  title: 'Alphabetically',\r\n  price: 'Cheapest',\r\n};\r\n\r\nconst PER_PAGE_OPTIONS = [4, 8, 16, 'all'];\r\n\r\nfunction Catalog({\r\n  products,\r\n  cart,\r\n  favorites,\r\n  addToCart,\r\n  addToFavorites,\r\n}) {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  const sort = searchParams.get('sort') || 'age';\r\n  const page = Number(searchParams.get('page') || 1);\r\n  const perPage = searchParams.get('perPage') || 'all';\r\n\r\n  \r\n  const sortedProducts = useMemo(() => {\r\n    const prepared = [...products];\r\n\r\n    switch (sort) {\r\n      case 'title':\r\n        return prepared.sort((a, b) =>\r\n          a.name.localeCompare(b.name)\r\n        );\r\n\r\n      case 'price':\r\n        return prepared.sort(\r\n          (a, b) => a.priceDiscount - b.priceDiscount\r\n        );\r\n\r\n      case 'age':\r\n      default:\r\n        return prepared.sort((a, b) => b.year - a.year);\r\n    }\r\n  }, [products, sort]);\r\n\r\n \r\n  const visibleProducts = useMemo(() => {\r\n    if (perPage === 'all') {\r\n      return sortedProducts;\r\n    }\r\n\r\n    const start = (page - 1) * perPage;\r\n    const end = start + Number(perPage);\r\n\r\n    return sortedProducts.slice(start, end);\r\n  }, [sortedProducts, page, perPage]);\r\n\r\n  const totalPages =\r\n    perPage === 'all'\r\n      ? 1\r\n      : Math.ceil(sortedProducts.length / perPage);\r\n\r\n \r\n  const handleSortChange = (e) => {\r\n    setSearchParams({ sort: e.target.value });\r\n  };\r\n\r\n  const handlePerPageChange = (e) => {\r\n    const value = e.target.value;\r\n\r\n    if (value === 'all') {\r\n      setSearchParams({ sort });\r\n    } else {\r\n      setSearchParams({\r\n        sort,\r\n        perPage: value,\r\n        page: '1',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    setSearchParams({\r\n      sort,\r\n      perPage,\r\n      page: String(newPage),\r\n    });\r\n  };\r\n\r\n  if (!products.length) {\r\n    return <h2>There are no products yet</h2>;\r\n  }\r\n\r\n  return (\r\n    <section className=\"catalog\">\r\n      <h1 className=\"catalog-title\">Products</h1>\r\n\r\n      \r\n      <div className=\"catalog-controls\">\r\n        <label>\r\n          Sort by:{' '}\r\n          <select value={sort} onChange={handleSortChange}>\r\n            {Object.entries(SORT_OPTIONS).map(([key, label]) => (\r\n              <option key={key} value={key}>\r\n                {label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          Items on page:{' '}\r\n          <select value={perPage} onChange={handlePerPageChange}>\r\n            {PER_PAGE_OPTIONS.map(option => (\r\n              <option key={option} value={option}>\r\n                {option}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n     \r\n      <div className=\"catalog-grid\">\r\n        {visibleProducts.map(product => (\r\n          <ProductCard\r\n            key={product.id || product.itemId}\r\n            product={product}\r\n            cart={cart}\r\n            favorites={favorites}\r\n            addToCart={addToCart}\r\n            addToFavorites={addToFavorites}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n     \r\n      {totalPages > 1 && (\r\n        <div className=\"catalog-pagination\">\r\n          {Array.from({ length: totalPages })\r\n            .map((_, i) => i + 1)\r\n            .map(p => (\r\n              <button\r\n                key={p}\r\n                onClick={() => handlePageChange(p)}\r\n                disabled={p === page}\r\n              >\r\n                {p}\r\n              </button>\r\n            ))}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Catalog;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}